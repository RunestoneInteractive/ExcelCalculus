         <chapter xml:id="chap-3-RateChangeDerivatives">
            <title>Rate of Change and Derivatives</title>
            
<introduction>
<p>Calculus looks at two main ideas, the rate of change of a function and the accumulation of a function, along with applications of those two ideas.  In this course, since we are interested in functions in the financial world we look at those ideas in both the discrete and continuous case.  </p>
</introduction>

         <section xml:id="sec-3-1-MarginalFunctions">
            <title>Marginal Functions and Difference Quotients</title>

          <p><url href="Examples/Section-3-1-Examples.xlsx">Link to worksheets used in this section</url></p>

<p> There are a number of industries where it is common for people to pay significantly different prices for the same product from the same vender.  (Airline tickets, symphony seats, and doughnuts at different times of the day come to mind.)  The reason is generally not favoritism or an irrational vender, but an analysis that looks at the change in costs and profits for making an additional sale.  Flying a plane with 51 passengers does not cost much more than flying the same plane with 50 passengers.  The same is true when playing a symphony.  Selling an extra doughnut at half price, just before closing when you would have to throw the doughnut out adds to the profit.  In all of these cases, we are less concerned with total revenues and profits and more concerned with how things change with one more sale.</p>
<p>
In finance and economics this issue is dealt with using marginal functions. </p> 

<definition><title>Marginal value</title><p>If <m>f(x)</m> is a function (i.e., cost, revenue, or profit), we define the <term>marginal value</term> of <m>f(x)</m> to be the change in <m>f(x)</m> as <m>x</m> increases by 1.  Thus</p>

<assemblage><p><me>Marginal\ f(x+1)=f(x+1)-f(x).</me></p></assemblage></definition>

<p>It is worthwhile to point out a detail that may cause a bit of confusion.  Note that we are defining marginal functions of x+1 rather than the marginal functions of x.  This is the standard convention in finance where the question is phrased in terms of change associated with producing one more.  I am more concerned about deciding about what I should do rather than looking at what I have already done. The usual functions with related marginal functions are Cost, Revenue, and Profit. </p>
<ul>
<li><p>Marginal Cost at x, or Marginal Cost(x+1) is the change from Cost(x) to Cost(x+1) : <me>Marginal\ Cost(x+1)=Cost(x+1)-Cost(x)</me></p></li>
<li><p>Marginal Revenue(x+1) is the change from Revenue(x) to Revenue(x+1)  <me>Marginal\ Revenue(x+1)=Revenue(x+1)-Revenue(x)</me></p></li>
<li><p>Marginal Profit(x+1) is the change from Profit(x) to Profit(x+1).  <me>Marginal\ Profit(x+1)=Profit(x+1)-Profit(x)</me></p></li>
</ul>

<p>
It is noteworthy that the three examples mentioned are all cases where the cost of producing the goods has already been set, the goods cannot be saved and sold later, and any change in revenue adds to the profit.</p>

<example><title>Marginal functions for widgets</title>
<p><url href="https://youtu.be/ieyBmPqUBE4">Link to video of this example</url></p>
<p>
  For my widget company I have determined that the cost and demand price functions are:</p>

<me>Cost(q)=40+3q+q^2/10.</me>
<me>DemandPrice(q)=30-q/2.</me>

<p>I want to compute the marginal cost, revenue, and profit to produce the 11th and 26th widget.  I also want to understand the marginal cost of producing the 1st widget.</p>
<p>
To set up the problem I recall that we assume we are selling at the demand price, the highest price consumers will pay and still have us sell all we produce.  Thus the formulas for revenue and profit are:</p>

<assemblage><p>
<me>Revenue(q)=(Demand Price(q))*q.</me>
<me>Profit(q)=Revenue(q)-Cost(q).</me>
</p></assemblage>

<p>I set up my worksheet to compute these values.</p>

                <image width="70%" source="images/sec3-1-1.png">
                </image>


<p>I then create additional columns for the marginal functions.</p>

                <image width="70%" source="images/sec3-1-2.png">
                </image>

<p>Now we simply go back to values and see the values.</p>

                <image width="70%" source="images/sec3-1-3.png">
                </image>
                
<me>Marginal Cost(11)=Cost(11)-Cost(10)=85.1-80=5.1.</me>
<me>Marginal Revenue(11)=Revenue(11)-Revenue(10)=269.5-250=19.5.</me>
<me>Marginal Profit(11)=Profit(11)-Profit(10)=184.4-170=14.4.</me>
<p><m>\ </m> </p>
<me>Marginal Cost(26)=Cost(26)-Cost(25)=185.6-177.5=8.1.</me>
<me>Marginal Revenue(26)=Revenue(26)-Revenue(25)=442-437.5=4.5.</me>
<me>Marginal Profit(26)=Profit(26)-Profit(25)=256.4-260=-3.6.</me>
</example>

<p>The last equation illustrates the use of marginal functions.  While producing and selling the 26th widget did increase total revenue, the marginal profit was negative, so I would have been better off if I had made fewer widgets.  
Notice that the marginal value of producing the 1st widget is not on the spreadsheet and needs to be dealt with as a special case.  Given our functions we have two reasonable ways to understand the value <m>Cost(0)</m>.  Either we can assume that there is no cost to not being in a business, so <m>Cost(0)=0</m>, and our cost function was only valid for positive numbers, or that the <m>Cost(0)</m> is understood as the fixed costs, which we have already undertaken, like a tax or license fee, so <m>Cost(0)=40</m> for this problem.  Both are reasonable interpretations.  We will need to look at the context of our problem to decide on the correct interpretation.</p>

<p>Many questions in business can be translated into making some function as big or small as possible, depending on whether we think the value is good or bad.  It is thus often useful to see a graph of both the function of interest and the related marginal function on the same graph.</p>

<example><title>Profit and Marginal Profit Together</title>
<p><url href="https://youtu.be/P-Y47M9eONI">Link to video of this example</url></p>
<p>  The function <m>Profit(q)=-q^2/20+100q-1000 </m> expresses the profit at my gadget factory.  Plot both profit and marginal profit together to estimate both the maximum profit at the factory as well as the quantity I should produce to get that profit.</p>

<p>In setting up the spreadsheet, there are some details to notice.</p>

                <image width="70%" source="images/sec3-1-4.png">
                </image>

<p>Since Excel does negation before powers, I need parentheses so <m>â€“(q^2)</m> is evaluated correctly.  Since I suspect I will have to look at a large range of numbers to find the maximum, I put Profit(q) and Profit(q+1) as separate columns.  This keeps my marginal operation in a single row and allows computation of Marginal Profit without evaluating for every value of q.  We now look at the graph with both Profit and Marginal Profit.  To make the graph easier to read, a secondary axis is used for profit.  This allows us to see where Marginal Profit crosses the axis.</p>

                <image width="70%" source="images/sec3-1-5.png">
                </image>

<p>We see that profit reaches a maximum where marginal profit is zero.  This occurs approximately when q is approximately 1000.  In that case the profit is about $50,000.  Looking back at the numbers in the spreadsheet, we see that the maximum profit is closer to $49,000.</p>

                <image width="50%" source="images/sec3-1-6.png">
                </image>
</example>

<p>The more realistic situation for us to face is one where we are given a collection of data points.  In that situation we need to first find a best fitting curve and use it to make predicted values.  Then we can find the marginal function of interest and do our comparison.</p>

<example><title>Marginal Profit from Data</title>
<p><url href="https://youtu.be/Vk-lG9Lysgo">Link to video of this example</url></p>
<p>  I have the following data on profit and production level for widgets.</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Widgets produced</cell>
<cell>40</cell>
<cell>50</cell>
<cell>78</cell>
<cell>87</cell>
<cell>95</cell></row>                    
<row bottom="minor">
<cell>Profit</cell>
<cell>$7,486.40</cell>
<cell>$14,505.60</cell>
<cell>$23,431.60</cell>
<cell>$23,014.30</cell>
<cell>$21,258.50</cell></row>   
                </tabular>


<p>Use Marginal Profit to find the level of production that maximizes profit.</p>

<p>I put the data into a spreadsheet and find a best fitting curve to produce a formula.  Looking at the data, I will assume that profit is a quadratic function of the amount produced.</p>

                 <image width="70%" source="images/sec3-1-7.png">
                </image>
 
<p>With the formula from the trendline I can add a column for Predicted Profit(x).  The obvious adjustment produces Predicted Profit(x+1).  It is then easy to compute the value of Marginal Profit(x+1).</p>

                <image width="100%" source="images/sec3-1-8.png">
                </image>

<p>Looking at the graph, the maximum is close to <m>x=80</m>.  I simply add some rows with appropriate values of x to get the desired answer.</p>

                 <image width="50%" source="images/sec3-1-9.png">
                </image>

<p>When <m>x = 80</m>, the Marginal Profit turns negative.  The maximum profit is $23,492.96, obtained by producing 80 widgets.</p>
</example>

<p><term>Difference Quotients and Average Rate of Change</term></p>

<p>The marginal value, <m>Mf(x+1)</m>, of a function <m>f(x)</m>, measures the amount of change from <m>f(x)</m> to <m>f(x+1)</m>.  It can also be understood as a special case of the average rate of change of <m>f(x)</m>.</p>

<assemblage><p>It is easy to see that the average rate of change of <m>f(x)</m>  as <m>x</m> goes from a to b is <me>  \frac{f(b)-f(a)}{b-a}</me></p></assemblage>

<p>There are a number of situations where we want to look at average rate of change for a period of some other change in the variable.  We may have production in thousands or millions of units.  If we are looking at monthly or quarterly financial records, we may want to look at the average rate of change over a year to take into account the seasonal variation of production.</p>

<example><title>Rate of Change when denominator is not 1</title>
<p><url href="https://youtu.be/KZ8qy3Q4GWk">Link to video of this example</url></p>
<p> We have the following monthly sales data on gizmos.</p>

                <image width="80%" source="images/sec3-1-10.png">
                </image>

<p>We want to find the rate of change of monthly sales. If we look at a graph of the sales data</p>

                <image width="60%" source="images/sec3-1-11.png">
                </image>
 
<p>I can see that sales are trending upwards, but there is a seasonal variation added in.  Excel will not do a good job of modeling this function with a trendline.  Thus, I want to find a rate of change over a period of 12 months to eliminate the seasonal variation.  To find the most recent trend I use the most recent data with a time period of 12 months.</p>

<p><me>\begin{aligned} Monthly\ Rate\ of\ Change \amp = \frac{Sales(25)-Sales(13)}{25-13} \\ 
\amp = \frac{1298-1176}{25-13}=\frac{122}{12}\approx 10 \end{aligned}</me></p>
</example>

<p>It is worth noting that the need to adjust for the right time period for comparisons is probably the reason that company revenue reports typically show the previous quarter as well as the quarter from a year earlier.
</p>

<p><term>An Excel Trick for Difference Quotients</term></p>
<p><url href="https://youtu.be/N50HlMfvYSc">Link to video of this example</url></p>
<p>When creating marginal functions or other difference quotients, we often want the computations kept in one row, particularly if we want to graph the function and the marginal function together.  A careful arrangement of the columns and the use of quick fill will make our life easier.</p>

<p> Suppose my revenue function is <m>rev(q)=-0.2q^2+20q-5</m> and I want to compute marginal revenue.  Then <m>rev(q+1)=-0.2(q+1)^2+20(q+1)-5</m>.  Experience shows that students will often make a typing mistake in the second formula, often forgetting parentheses somewhere of forgetting to change one of the copies of <m>q</m> to <m>q+1</m>.</p>

                <image width="60%" source="images/sec3-1-12.png">
                </image>
 
<p>One solution is to add an extra column for <m>q+1</m> next to the column for <m>q</m>.  Then the formula for <m>rev(q+1)</m> is obtained by quick filling form the formula for <m>rev(q)</m>.</p>

                <image width="60%" source="images/sec3-1-13.png">
                </image>


<p>This trick will be even more useful in the next section when we want to compute the values of <m>rev(q)</m>, <m>rev(q+0.00)</m>, and <m>rev(q-0.001)</m>. </p>


<exercises xml:id="exercises-set-sec-3-1">
	<title>Exercises: Marginal Functions and Difference Quotients Problems</title>

<exercise ><statement><p> If <m>revenue(q)=5q</m>, what is the marginal revenue from selling the 10th item?
</p></statement><solution>
<p>The marginal revenue would be given by</p> 
<me>marginal\ revenue(10)=revenue(10)-revenue(9)</me>
<me>=50-45=5</me>
<p>The marginal revenue from selling the 10th item is $5.</p>

</solution></exercise>

<exercise ><statement><p> If <m>profit(q)=-100+5q-0.01q^2</m>, what is the marginal profit from selling the 20th item?
</p></statement></exercise>
<exercise ><statement><p> If <m>cost(q)=100+7q</m>, what is the marginal cost from selling the 30th item?
</p></statement><solution>
<p>The marginal cost would be given by</p> 
<me>marginal\ cost(30)=cost(30)-cost(29)</me>
<me>=2200-2193=7</me>
<p>The marginal cost from selling the 30th item is $7.</p>
</solution></exercise>

<exercise ><statement><p> If <m>revenue(q)=-500+7q-0.01\sqrt{q^3}</m>, what is the marginal revenue from selling the 100th item?
</p></statement></exercise>
<exercise ><statement><p> If <m>cost(q)</m> is a constant function what can you say about the marginal cost function?  (Use algebra to find a formula for the marginal function.)
</p></statement><solution>
<p>
Hint: <m>marginal\ cost(q+1)=cost(q+1)-cost(q)</m></p>
<p>But the cost function is equal to some constant, so <m>cost(q+1)=cost(q)</m></p>
<p>This implies that the Marginal Cost function must be 0.
</p></solution></exercise>

<exercise ><statement><p> If <m>revenue(q)</m> is a linear function with slope <m>m</m>, what can you say about the marginal revenue function?  (Use algebra to find a formula for the marginal function.)
</p></statement></exercise>

<exercisegroup><introduction><p>
For problems 7-12:</p>
<ol label="(a)">
<li><p> Make a chart of the function and the marginal function as q goes from 0 to 30.</p></li>
<li><p> Plot the function and the marginal function on the same graph.</p></li>
<li><p> From the shape of the graph of the marginal function, decide what kind of graph it appears to be.</p></li>
<li><p> Find the formula for a best fitting curve for the marginal function.</p></li>
<li><p> List the regions where the original function is increasing and the regions where it is decreasing.</p></li>
<li><p> List the regions where the marginal function is positive and where the marginal function is negative.</p></li>
</ol>
</introduction>

<exercise ><statement><p> Let <m>cost(q)=5000+23 q</m>.</p></statement>
<solution>
<ol label="(a)">
<li><p> Recall that <m>Marginal\ Cost(q+1)=Cost(q+1)-Cost(q)</m></p>
<p>The entries in the cells should be</p>
                <image width="60%" source="images/sec3-1-sol7a.png">
                </image>
<p>(See part b for some of the values)
</p></li>
<li><p> Partial table and the graphs:</p>
                <image width="100%" source="images/sec3-1-sol7b.png">
                </image>
</li>
<li><p> The table and the graph indicate that the marginal function is a constant (23 to be precise)</p></li>
<li><me>MCost (q)= 23</me></li>
<li><p> The cost function is always increasing.</p></li>
<li><p>The marginal function is always positive.</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> Let <m>revenue(q)=16 q</m>.</p></statement></exercise>

<exercise ><statement><p> Let <m>revenue(q)=-0.3q^2+10q-15</m>.</p></statement>
<solution>
<ol label="(a)">
<li><p> Recall that <m>Marginal\ Revenue(q+1)=Revenue(q+1)-Revenue(q)</m></p>
<p>The entries in the cells should be</p>
                <image width="60%" source="images/sec3-1-sol9a.png">
                </image>
<p>(See part b for some of the values)
</p></li>
<li><p> Partial table and the graphs:</p>
                 <image width="80%" source="images/sec3-1-sol9b.png">
                </image>
</li>
<li><p> The table and the graph indicate that the marginal function is a line.</p></li>
<li><me>MRevenue (q+1)= -0.6q+9.7</me></li>
<li><p> The Revenue function is increasing until <m>q</m> is about 17.</p></li>
<li><p>The marginal function is positive until <m>q</m> is about 17.</p></li>
</ol>
</solution></exercise>


<exercise ><statement><p> Let <m>profit(q)=-2q^2+100q-500</m>.</p></statement></exercise>

<exercise ><statement><p> Let <m>cost(q)=q^3-4.5q^2+60q+100</m>.</p></statement>
<solution>
<ol label="(a)">
<li><p> Recall that <m>Marginal\ Cost(q+1)=Cost(q+1)-Cost(q)</m></p>
<p>The entries in the cells should be</p>
                <image width="90%" source="images/sec3-1-sol11a.png">
                </image>
<p>(See part b for some of the values)
</p></li>
<li><p> Partial table and the graphs:</p>
                <image width="80%" source="images/sec3-1-sol11b.png">
                </image>
</li>
<li><p> The table and the graph indicate that the marginal function is a quadratic function.</p></li>
<li><me>MCost (q)= 3q^2-6q+56.5</me></li>
<li><p> The Cost function is always increasing.</p></li>
<li><p>The marginal function is always positive.</p></li>
</ol>
</solution></exercise>


<exercise ><statement><p> Let <m>value(q)=100(0.9)^q</m>.</p></statement></exercise>
</exercisegroup>

<exercisegroup><introduction><p>
For problems 13-16 you are given data for a function.</p>
<ol label="(a)">
<li><p> Assuming the function is of the kind specified; find a best fitting curve for the function and a formula.</p></li>
<li><p> Plot the function and the marginal function on the same graph.</p></li>
<li><p> From the shape of the graph of the marginal function, decide what kind of graph it appears to be.</p></li>
<li><p> In a textbox, describe your conclusions about the sign of the marginal function and the rising or falling of the original function.</p></li>
</ol>
</introduction>

<exercise ><statement><p> Assume profit(q) is a polynomial function of degree 2 and that you have the following data:
</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Quantiy</cell>
<cell>30</cell>
<cell>48</cell>
<cell>73</cell>
<cell>149</cell>
<cell>177</cell></row>                    
<row bottom="minor">
<cell>Profit</cell>
<cell>447</cell>
<cell>561</cell>
<cell>669</cell>
<cell>801</cell>
<cell>759</cell></row>   
                </tabular>
</statement><solution>
<ol label="(a)">
<li><p> The best fitting curve is:   <m>y = -0.0297x2 + 8.26x + 227.96</m></p></li>
<li><p> If  <m>Marginal\ Profit(x+1)=Profit(x+1)-Profit(x)</m>, then
 can set this up in Excel by finding: <m>q, Profit (q), Profit(q-1)</m> and <m>Marginal\ Profit (q)</m></p>
                 <image width="80%" source="images/sec3-1-sol13a.png">
                </image>
 <p>The chart was created and the marginal profit was plotted using the secondary axis.</p>
                <image width="80%" source="images/sec3-1-sol13b.png">
                </image>

</li>
<li><p> The Marginal Profit function seems to be a straight line with negative slope.</p></li>
<li><p> In a textbox, describe your conclusions about the sign of the marginal function and the rising or falling of the original function.</p></li>
</ol>

</solution></exercise>


<exercise ><statement><p> Assume profit(q) is a polynomial function of degree 2 and that you have the following data:
</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Quantiy</cell>
<cell>105</cell>
<cell>203</cell>
<cell>349</cell>
<cell>535</cell>
<cell>644</cell></row>                    
<row bottom="minor">
<cell>Profit</cell>
<cell>339</cell>
<cell>1535</cell>
<cell>2429</cell>
<cell>2035</cell>
<cell>1029</cell></row>   
                </tabular>
</statement></exercise>


<exercise ><statement><p> Assume ResaleValue(q) is an exponential function and that you have the following data:
</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Year</cell>
<cell>2</cell>
<cell>4</cell>
<cell>6</cell>
<cell>8</cell>
<cell>10</cell></row>                    
<row bottom="minor">
<cell>Resale Value</cell>
<cell>$8,607</cell>
<cell>$7,593</cell>
<cell>$6,423</cell>
<cell>$5,684</cell>
<cell>$5,051</cell></row>   
                </tabular>
</statement><solution>
<ol label="(a)">
<li> 
                <image width="60%" source="images/sec3-1-sol15a.png">
                </image>
 
<me>Resale\ Value(x)=9836e^{-0.068x}</me></li>
<li><p> Using the following Excel commands</p>
                <image width="80%" source="images/sec3-1-sol15b.png">
                </image>
                <image width="80%" source="images/sec3-1-sol15c.png">
                </image>
</li>
<li><p> Marginal Resale Value seems to be an exponential function</p></li>
<li><p> It appears that Marginal Resale Value is always negative and Resale value is always decreasing.</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> Assume retirementBalance(q) is an exponential function and that you have the following data:
</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Year</cell>
<cell>10</cell>
<cell>20</cell>
<cell>30</cell>
<cell>35</cell>
<cell>40</cell></row>                    
<row bottom="minor">
<cell>Amount</cell>
<cell>$54,713</cell>
<cell>$143,909</cell>
<cell>$289,476</cell>
<cell>$395,709</cell>
<cell>$533,071</cell></row>   
                </tabular>           
</statement></exercise>
</exercisegroup>

<exercise ><statement><p> The monthly revenue, in thousands of dollars for your company is found to follow:</p>
<me>revenue(t)=300+5t+30 \sin(t/6*pi()).</me>
<p>Plot the revenue and marginal revenue.  Explain why marginal revenue is not a good indicator of growth.  Plot average rate of change over a 12-month span and explain why it is a better measure of growth.
</p></statement><solution>
                <image width="90%" source="images/sec3-1-sol17a.png">
                </image>
<p>Marginal Revenue is the change in revenue each month. This gives us some idea of what is happening each month, but does not give a very clear picture of overall trends.
</p>
<p>
The average rate of change over a 12-month time span would be
<me>Average\ rate\ of\ change=  \frac{Revenue(13)-Revenue(1)}{13-1}=\frac{360-300}{12}=5</me>
The overall growth over an entire year gives a better indication of trends. And the comparison over a year indicates a slight growth on average by $5/month.

</p>
</solution></exercise>

<exercise ><statement><p> Historical data for quarterly revenue reports for Microsoft can be found online.  (A good source is 
<url href="http://www.microsoft.com/investor/EarningsAndFinancials/TrendedHistory/default.aspx">http://www.microsoft.com/investor/EarningsAndFinancials/TrendedHistory/default.asp</url>.)
 Plot 5 years of data.
 <ol label="(a)">
 
<li><p> Explain why looking at marginal change of revenue from one quarter to the next is misleading.</p></li>
<li><p> Explain how to adjust for this problem.</p></li>
</ol>
</p></statement></exercise>



</exercises>
        </section>
 
         <section xml:id="sec-3-2-NumericDerivativesLimits">
            <title>Numeric Derivatives and Limits</title>

          <p><url href="Examples/Section-3-2-Examples.xlsx">Link to worksheets used in this section</url></p>
            <p>In the previous section, we looked at marginal functions, the difference between f(x+1) and f(x).  For functions that are only defined at integer values, this is the obvious way to define a rate of change.  However for functions that are defined on an interval, we would like to use the information at values closer to our value of x.</p>
<p>Intuitively, we would like to be able to zoom in on the graph of f(x) at a point until the graph looks like a straight line, then pick two points on that line, and find the slope as the rise over the run.  The rate of change is then the slope of the line we have found.  If we could zoom arbitrarily far, this process would give an instantaneous rate of change, or the derivative of the function at that point.</p>   

<definition><title>Formal derivative at a point</title>
<p> For a function <m>f(x)</m>, the instantaneous rate of change of <m>f(x)</m> at <m>x=x_0</m>, or the <term>derivative of <m>f(x)</m>, at <m>x=x_0</m></term>, denoted as <m>f'(x)</m>, is defined as </p>

<assemblage><p><me>
f'(x_0 )=\lim_{(del\ x\to 0)}\frac{f(x_0+del\ x)-f(x_0)}{del\ x}.
</me></p></assemblage>
<p>where <m>\lim_{ x\to a}f(x)</m>  is understood to be value that <m>f(x)</m> gets arbitrarily close to by making <m>x</m> arbitrarily close to <m>a</m>.</p>
</definition>

<p>Our task in this section is to turn our intuitive notion and definition and into a process that lets us find the value, and to find it efficiently. </p> 

<example><title> A simple derivative at a point</title>

<p> Let <m>f(x)=x^2</m>.  We would like to find <m>f'(1)</m>.</p>
<p><url href="https://youtu.be/7WCPeUwr8GY">Link to video of this example</url></p>
<p><term>Solution A</term>: We start with our intuitive notion.  We want to look at the graph of <m>f(x)</m>, zoomed in far enough that the graph looks like a straight line.  I set up a worksheet to look at the graph of <m>(x)=x^2</m> near <m>x_0=1</m>.  Since I want to be able to zoom in. I set up the graph so that it plots points that are multiples of <m>del\ x</m> from <m>x=x_0</m>.  I also want to plot the line connecting the points <m>(x_0,f(x_0))</m> and <m>(x_0,f(x_0+del\ x))</m> and notice that the slope of the secant line between them is <me>\frac{f(x_0+del\ x)-f(x_0 )}{del\ x}.</me> </p> 
<p>For this example <m>x_0=1</m>. If <m>del\ x=1</m>, we can see that the function and the secant line are clearly distinct.</p>  

                <image width="70%" source="images/sec3-2-1.png">
                </image>

<p>The worksheet is designed to make it easy to change the value of <m>del\ x</m>.</p>

                <image width="70%" source="images/sec3-2-2.png">
                </image>

<p>As we can see, if we let <m>del\ x=1</m>, the slope is 3, but we have not zoomed in far enough for the graph of f(x) to look like a straight line.  Letting <m>del\ x=0.01</m>, the slope is 2.01, and the graphs of the function and secant line seem to be the same.</p>

                <image width="70%" source="images/sec3-2-3.png">
                </image>

<p> With some experimentation, taking both positive and negative values of <m>del\ x</m>, we get the following table of values:</p>

                <tabular top="major" halign="center">
<row bottom="minor">
<cell><m>del\ x</m></cell>
<cell>slope</cell>
<cell><m>\ \ \ </m></cell>
<cell><m>del\ x</m></cell>
<cell>slope</cell>
</row>                    
<row bottom="minor">
<cell>1</cell>
<cell>3</cell>
<cell><m>\ \ \ </m></cell>
<cell>-1</cell>
<cell>1</cell>
</row>                    
<row bottom="minor">
<cell>0.1</cell>
<cell>2.1</cell>
<cell><m>\ \ \ </m></cell>
<cell>-0.1</cell>
<cell>1.9</cell>
</row>                    
<row bottom="minor">
<cell>0.01</cell>
<cell>2.01</cell>
<cell><m>\ \ \ </m></cell>
<cell>-0.01</cell>
<cell>1.99</cell>
</row>                    
<row bottom="minor">
<cell>0.001</cell>
<cell>2.001</cell>
<cell><m>\ \ \ </m></cell>
<cell>-0.001</cell>
<cell>1.999</cell>
</row>                    
                </tabular>
 
<p>It is clear that as <m>del\ x</m> gets very small, the slope of the tangent line gets closer and closer to 2.  Thus <m>f'(1)=2</m>.</p>

<p><term>Solution B</term>: The method of the first solution takes too much work and requires us to reset a worksheet and keep track of the slope as we try a number of values for <m>del\ x</m>.  We would like to create a worksheet that simply shows the values of the slope of the secant line for values of <m>del\ x</m> and takes the value that this approaches.  We can set up a worksheet where each line takes <m>del\ x</m> from the previous line and divides by 10.</p>

                <image width="70%" source="images/sec3-2-4.png">
                </image>

<p>We get the same value whether we start <m>del\ x</m> at 1 or -1.  Once again, we find <m>f'(1)=2</m>.</p>

<p><term>Solution C</term>: This method of finding the derivative still has a number of difficulties.  In the example above, the exact answer we want (in this case 2) did not show up in any of our computations.  We also find that if we make <m>del\ x</m> too small, we run into a problem called round off error.  If the next chapter we will look at methods that compute derivatives symbolically, but for this chapter we want an easy method of approximation.  We will use the approximation technique that is used by most graphing calculators when they compute the derivative.  They use a <q>balanced difference quotient</q> where we find the slope of the secant line between points <m>del\ x</m> before and after the point we are interested in. As the picture below shows, compared to either the right secant or the left secant, for most functions the balanced secant is closer to being parallel to the tangent line.</p>

                <image width="70%" source="images/sec3-2-5.png">
                </image>

<p>We will use the default on calculators, that is we will use <m>del\ x = 0.001</m>.</p>

                <image width="70%" source="images/sec3-2-6.png">
                </image>

<p>
For our example this gives our familiar result that <m>f'(1)=2</m>.</p>
</example>

<p>We formalize this last approach</p>

<definition><title>Calculator Approximation of the Derivative</title>
<assemblage><p><me>
 f'(x)\approx\frac{f(x+.001)-f(x-0.001)}{.002}.  </me></p></assemblage>
</definition>

<p>For the rest of this text, when we need to compute a numerical approximation to the derivative we will use the calculator approximation of the derivative.</p>


<p>We should note that the calculator rule is an approximation technique, rather than a definition.  It will give a misleading answer for functions that do not approximate a straight line in a window that is 0.002 wide.  In this course, the approximation will only cause a problem with functions that have corners or cusps, like the functions <m>f(x)=|x|</m> and <m>f(x)=x^{(2/3)}</m> at <m>x=0</m>.  The main advantage of the using the calculator rule is that it is straightforward enough to compute to allow us to plot a function and its derivative on a single graph.  This allows us to compare the graph of the function with the graph of the derivative.</p>

<p><url href="https://youtu.be/F_9rbxTwCXA">Link to video of this example and the next example.</url></p>
<example><title>A Function and its Derivative</title>

<p> Compare the graph of <m>f(x)=x^2-2 x+1</m> and the graph of its derivative, using separate axes for the two graphs.  What features of the graph of <m>f(x)</m> can be located by using the graph of <m>f'(x)</m>?</p>

<p><term>Solution</term>: Since this problem will serve as a template for a question we will look at many times, it is worthwhile to look at it in detail.  We start by setting up a workbook that will have the structure we need to compute a chart of values for <m>f(x)</m> and <m>f'(x)</m>.</p>

                <image width="70%" source="images/sec3-2-7.png">
                </image>

<p>The picture above gives the minimal amount we need to type in.  The rest will be done with quick filling.  The entry of cell B1 gives the formula for the function.  In cell D5 we evaluate the function using the first value of x from cell A5.  We have two values of x in cells A5 and A6 so that we can quick fill to get a list of x values.  We use absolute references for <m>del\ x</m>, so it will not change on quick fills.  We then fill cells E5 and F5 from cell D5, then fill row 6 from row 5, then fill the rest of the chart from rows 5 and 6.</p>

                <image width="90%" source="images/sec3-2-8.png">
                </image>

<p>It is then a straightforward task to plot the two curves.  We notice that the graph of the function is a parabola.  If the derivative is negative, the graph of <m>f(x)</m> is decreasing.  If the derivative is positive, the graph of the function <m>f(x)</m> is increasing.  The graph of <m>f(x)</m> reaches its minimum at the vertex, which is also where <m>f'(x)=0</m>.  We also notice that the derivative of this parabola seems to be a straight line.</p>
</example>

<p>Several of our observations from this example work in general.  Looking at a single point, the derivative of a function is the slope of the line tangent to the graph at that point.  The tangent line is a best linear approximation to the graph at a point.  Looking at the derivative at lots of points, the graph of a function is increasing when the derivative is positive, and the graph of a function is decreasing when the derivative is negative.  For the graph to have a point that is locally a maximum or minimum, the derivative cannot be positive or negative, so the derivative must either be zero or undefined for the graph of the function to have a maximum or minimum.  Finding places where functions reach their highest and lowest values is an important activity in mathematics.  We will look at these applications in more depth in upcoming sections.  The reader is warned that we can have places where the derivative is zero but the function is still increasing or decreasing.</p>

<example><title>The derivative of a more complicated function</title>
<p> Compare the graph of <m>f(x)=x^3 (x^2-36)</m> and the graph of its derivative, using separate axes for the two graphs.  What features of the graph of <m>f(x)</m> can be located by using the graph of <m>f'(x)</m>?</p>

<p><term>Solution</term>: The setup for this example is very similar to the last problem.</p>

                <image width="100%" source="images/sec3-2-9.png">
                </image>

<p>This time we notice three places where the derivative seems to be zero, when x is near -5, 0, and 5.  We use goal seek on the derivative and find that the derivative is zero when <m>x=-4.648</m>, 0, or 4.648.  Looking at the graph of f(x) at those points, we see that <m>f(x)</m> has a maximum when <m>x=-4.648</m>, and a minimum when <m>x=-4.648</m>.  When <m>x=0</m>, <m>f(x)</m> is neither a maximum nor a minimum.</p>
</example>

<p>In the next chapter we will look at ways to find the derivative of a function symbolically.  We can already reason our way to symbolically finding the derivative of simple functions.  If our function <m>f(x)</m> is constant or linear, then the graph of the function is its own tangent line, so the derivative is simply the slope of the graph.  For quadratic functions we noticed that the graph of the derivative seems to be linear.  If we can guess the form of the derivative, we can use trendlines to produce a formula.</p>

<example><title>Using trendlines to get the formula of a derivative</title>
<p><url href="https://youtu.be/AXSJ1UwTSfk">Link to video of this example</url></p>
<p>Use trendlines to find a formula for the derivative of <m>f(x)=2x^2+5x-7</m>.</p>

<p><term>Solution</term>: The setup for this example is very similar to the last problem.  We simply change the function.  This involves changing the formulas in cells B1 and D5, then using quick copy to change the formulas for the cells in columns D through F.</p>

                <image width="100%" source="images/sec3-2-10.png">
                </image>

<p>Once we have points for the derivative we add a trendline using a linear model.  We set the options to show both the formula for the trendline and the value of <m>R^2</m>.  The fact that <m>R^2=1</m>, indicates the trendline we found exactly fits the data.  In the workbook connected to this section there is a page for Example 6B.  It uses parameters for the coefficients on a quadratic formula, so that you can explore the derivative of a general quadratic function.</p>
</example>

<p><term>A Note on Terminology</term>:  It is worthwhile to point out some ambiguity in the terms used in this section and the previous section.  We have been using the term for <m>marginal\ f(x+1)</m> the change <m>f(x+1)-f(x)</m>, where <m>f(x)</m>, might be revenue, or cost, or profit.  This is the standard definition of a marginal function from finance or economics.  However, if you do a web search on <q>calculus marginal revenue</q> you will find that most calculus books treat the marginal function as simply another name for the derivative.  While they are related, they are not the same thing.  In the next chapter we will find that it is often easier to produce a formula for the derivative of a function rather than the related marginal function, which is why the derivative is used for the marginal function.  However, in this text, we will stick to the correct definition of marginal functions.</p>

<p><term>Summary</term></p>

<p>The notion of derivative is one of the key concepts of calculus.  The concept of the derivative of a function is closely connected to the concept of marginal function.  We gave three ways of understanding the derivative of a function at a point.</p>

<assemblage><p><term>Intuitive understanding</term>: The derivative of <m>f(x)</m>, at <m>x=x_0</m> denoted as <m>f'(x_0)</m>,   is the slope of the line obtained by zooming in on the graph at <m>(x_0,f(x_0 ))</m> until it looks like a straight line.</p></assemblage>



<assemblage><p><term>Formal definition</term>:  The derivative of <m>f(x)</m>, denoted as <m>f'(x)</m>, is defined as 

<me>f'(x)=\lim_{del\ x\to 0} \frac{f(x+del\ x)-f(x)}{del\ x}.</me></p></assemblage>


<assemblage><p><term>The calculator approximation</term>:  The derivative of <m>f(x)</m>, can be approximated using the formula

<me>f'(x)\approx \frac{f(x+.001)-f(x-0.001)}{.002}.</me>
</p></assemblage>

<exercises xml:id="exercises-set-sec-3-2">
	<title>Exercises: Numeric Derivatives and Limits</title>

<exercisegroup><introduction>
<p>1-10) For each specified function and x-value, do the following: </p>
<ol label="(a)">
<li><p> Find a value of <m>del\ x</m> small enough that graph of the function looks like a straight line on the region from <m>5*del\ x</m> before the x-value to <m>5*del\ x</m> after the x-value.  Graph the function in this region and find the slope of the corresponding secant line</p></li>
<li><p>  Estimate the derivative by finding the slope of the secant when <m>del\ x</m> takes the values 0.1, 0.01, 0.001, 0.0001, -0.1, -0.01, -0.001, and -0.0001.  Give a value of the limit of the slope.</p></li>
<li><p> Use the calculator estimate to estimate the slope of the tangent.</p></li>
<li><p> Compare the value of the derivative <m>f'(x)</m> with the corresponding value of the marginal function <m>marginal\ f(x+1)</m>.</p></li>
</ol>
</introduction>
<solution><p>Comment: For problems 1-10 it makes sense to set up the table once with parameters that can be easily changed between problems.</p>
                <sidebyside widths="52% 30%" valigns="middle top">
                    <image source="images/sec3-2-sol0a.png"/>
                    <image source="images/sec3-2-sol0b.png"/>
                </sidebyside>
                <sidebyside widths="50% 35%" valigns="middle top">
                    <p>Excel Commands</p>
                    <p>Excel Output</p>
                </sidebyside>
 	 
Excel Commands	Excel output
<p>Change delx and x-value given depending on the problem, and adjust the function and the rest will autofill. Once the graph has been added that will update as well.
</p></solution>

<exercise ><statement><p> Use <m>f(x)=x^2+3</m> at <m>x=2</m>.
</p></statement><solution>
<ol label="(a)">
<li><p> Using Slope= (B14-B4)/(10*B1) we get the following</p>
                <image width="90%" source="images/sec3-2-sol1a.png">
                </image>
 
<p>So the slope for this choice of delx is 4.</p>
<p>Your may have chosen a slightly different delx, and as long as the graph looks roughly linear that would be fine.
</p></li>
<li><p>You can either change delx and record each of the slopes in the Excel sheet above, or we can set up another table that records the slopes for us. We prefer the second method because the table of values allows us to inspect the pattern more easily.</p>
<p>Excel commands for the table:</p>
                <image width="90%" source="images/sec3-2-sol1b.png">
                </image>
                <image width="90%" source="images/sec3-2-sol1b.png">
                </image>
<p>The limit is 4.
</p></li>
<li><me>f'(x)\approx\frac{f(x+0.001)-f(x-0.001)}{0.002}</me>
<p>So <m>f'(x)\approx\frac{f(2+.001)-f(2-.001)}{.002}=4</m> (second entry in the table for delx)</p>
</li>
<li><p> <me>Marginal\ f(x+1)=f(x+1)-f(x).</me>
<me>Marginal\ f(2+1)=f(3)-f(2)=(9+3)-(4+3)=5.</me>
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p>  Use <m>f(x)=(3x)^2-5</m> at <m>x=-2</m>.
</p></statement></exercise>

<exercise ><statement><p> Use <m>f(x)=5(x-2)^2</m> at <m>x=3.5</m>.</p></statement><solution>
<ol label="(a)">
<li> 
                <image width="90%" source="images/sec3-2-sol3a.png">
                </image>           
<p>The slope of the secant line is 15.</p>
</li>
<li><p>From work in part a, the limit is also 15.</p></li>
<li><p>From Row 21 we see that the slope of the tangent line is estimated to be 15</p></li>
<li><p> <me>Marginal\ f(4.5)=f(4.5)-f(3.5)</me>
<me>=5 (2.5)^2-5(1.5)^2=5(6.25-2.25)=20.</me>
So the derivative is 15 and the marginal function is 20 at this point.
</p></li>
</ol>
</solution></exercise>


<exercise ><statement><p> Use <m>f(x)=7</m> at <m>x=5</m>.
</p></statement></exercise>

<exercise ><statement><p> Use <m>f(x)=7x-4</m> at <m>x=3</m>.
</p></statement><solution>
<ol label="(a)">
<li>  
                <image width="90%" source="images/sec3-2-sol5a.png">
                </image>
<p>The slope of the secant line is 7.</p>
</li>
<li><p>From work in part a, the limit is also 7.</p></li>
<li><p>From Row 21 we see that the slope of the tangent line is estimated to be 7</p></li>
<li><p> <me>Marginal\ f(4)=f(4)-f(3)=7</me>
So the derivative is 7 and the marginal function is 7 at this point.
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> Use <m>f(x)=x^3-5</m> at <m>x=2</m>.
</p></statement></exercise>

<exercise ><statement><p>
 Use <m>f(x)=e^{2x}</m> at <m>x=1</m>.
</p></statement><solution>
<ol label="(a)">
<li>  
                <image width="90%" source="images/sec3-2-sol7a.png">
                </image>
<p>The slope of the secant line is 14.78.</p>
</li>
<li><p>From work in part a, the limit is also 14.78.</p></li>
<li><p>From Row 21 we see that the slope of the tangent line is estimated to be 14.78</p></li>
<li><p> <me>Marginal\ f(2)=f(2)-f(1)=e^4-e^2\approx 47.21</me>
Comment: Notice the very large difference between the derivative and the marginal function. The exponential function is very curved and this curvature means that the discrepancy between the marginal function and the derivative will be large. The difference between the two is much smaller for graphs that are less curved.
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> Use <m>f(x)=2^x</m> at <m>x=3</m>.
</p></statement></exercise>

<exercise ><statement><p> Use <m>f(x)=\ln(x)</m> at <m>x=5</m>.
</p></statement><solution>
<ol label="(a)">
<li>  
                <image width="90%" source="images/sec3-2-sol9a.png">
                </image>
<p>The slope of the secant line is 0.2.</p>
</li>
<li><p>From work in part a, the limit is also 0.2.</p></li>
<li><p>From Row 21 we see that the slope of the tangent line is estimated to be 0.2</p></li>
<li><p> <me>Marginal\ f(6)=f(6)-f(5)=\ln(6)-\ln(5)\approx 0.18</me>
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> Use <m>f(x)=x^3-5</m> at <m>x=2</m>.
</p></statement></exercise>
</exercisegroup>

<exercisegroup><introduction><p>For problems 11-18) For each specified function, do the following: </p>
<ol label="(a)">
<li><p> On a single graph, but using separate axes, graph the function and its derivative.</p></li>
<li><p>  Using goal seek, identify places where the derivative is 0 in the interval <m>-10 \lt x \lt 10</m>.</p></li>
<li><p> For each point where the derivative is 0, tell whether the corresponding point on the graph of the function is locally a maximum, minimum, or neither.</p></li>
</ol>
</introduction>


<exercise ><statement><p> Let <m>f(x)=x^3-4 x</m>.
</p></statement>
<solution>
<ol label="(a)">
<li>
                <image width="60%" source="images/sec3-2-sol11a.png">
                </image>
</li>
<li><p> The derivative seems to be zero at <m>x=-1.15</m> and at <m>x=1.15</m>.</p></li>
<li><p> We have a local maximum at <m>x=-1.15</m> and a local minimum at <m>x=1.15</m>.</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p>  Let <m>f(x)=x^4-49 x^2</m>.
</p></statement></exercise>

<exercise ><statement><p>  Let <m>f(x)=x^4-7 x^3</m>.
</p></statement>
<solution>
<ol label="(a)">
<li>
                <image width="60%" source="images/sec3-2-sol13a.png">
                </image>
</li>
<li><p>  The derivative seems to be 0 when <m>x=0</m> and <m>x=5.25</m>.</p></li>
<li><p> It seems that the graph has a minimum at <m>x=o</m>.  It seems that the graph has neither at <m>x=5.25</m>.</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p>  Let <m>f(x)=5x e^{-x}</m>.
</p></statement></exercise>

<exercise ><statement><p>  Let <m>f(x)=8x e^{-x^2 }</m>.
</p></statement>
<solution>
<ol label="(a)">
<li>
                <image width="60%" source="images/sec3-2-sol15a.png">
                </image>
</li>
<li><p>  It looks like the derivative is 0 at <m>x=-0.707</m> and at <m>x-0.707</m>.</p></li>
<li><p> The first of those points is a local minimum.  The second point is a local maximum.</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p>  Let <m>f(x)=3x+5</m>.
</p></statement></exercise>

<exercise ><statement><p>  Let <m>f(x)=\pi^2</m>.
</p></statement>
<solution>
<ol label="(a)">
<li>
                <image width="60%" source="images/sec3-2-sol17a.png">
                </image>
</li>
<li><p>  The derivative is always 0 for this function.</p></li>
<li><p> All points are both local maximums and local minimums.</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p>  Let <m>f(x)=x^3-4 x</m>.
</p></statement></exercise>
</exercisegroup>

<exercisegroup><introduction><p>For problems 19-22) For each specified function, do the following:  </p>
<ol label="(a)">
<li><p> On a single graph, but using separate axes, graph the function and its derivative.</p></li>
<li><p>  Looking at the graph of the derivative, decide what kind of function is an appropriate model for the derivative.</p></li>
<li><p> Add a trendline to produce a formula for the derivative.</p></li>
</ol>
</introduction>

<exercise ><statement><p>  Let <m>f(x)=x^3-6 x^2+3x</m>.
</p></statement><solution>
<ol label="(a)">
<li><p> 
                <image width="60%" source="images/sec3-2-sol19a.png">
                </image>
             </p></li>
<li><p>  The derivative looks like a polynomial of order 2. It is a parabola.</p></li>
<li><p> The trendline indicates the formula for the derivative can be approximated by</p>
<me>y=3x^2-12x+3</me>
</li>
</ol>
</solution></exercise>

<exercise ><statement><p>   Let <m>f(x)=x^4-36 x^2+x</m>.
</p></statement></exercise>

<exercise ><statement><p>   Let <m>f(x)=e^{3x}</m>.
</p></statement><solution>
<ol label="(a)">
<li><p> 
                <image width="60%" source="images/sec3-2-sol21a.png">
                </image>
            </p></li>
<li><p>  The derivative looks like an exponential function.</p></li>
<li><p> The trendline indicates the formula for the derivative can be approximated by</p>
<me>y=3 e^{3x}</me>
</li>
</ol>
</solution></exercise>

<exercise ><statement><p>   Let <m>f(x)=\ln(x)</m>.
</p></statement></exercise>
</exercisegroup>

 
</exercises> 
        </section>
 
         <section xml:id="sec-3-3-LocalLinearity">
            <title>Local Linearity</title>

          <p><url href="Examples/Section-3-3-Examples.xlsx">Link to worksheets used in this section</url></p>
<p>The last two sections examined rate of change in both the discrete and continuous case.  The first application for rate of change at a point is to make projections for values of the function close to that point. We want to find the equation of a linear function that can be used to approximate our function.  This is straightforward using the point-slope version of a linear equation.</p>
<p>
For the discrete case, given a function <m>y=f(x)</m>, where we know value of, <m>mf(a+1)</m>, the marginal change in <m>f(x)</m> to get to <m>x=a+1</m>, then our discrete linear approximation has the form</p>

<assemblage><p><me>discrete\ linear\ f_a (x)=f(a)+mf(a+1)*(x-a).</me></p></assemblage>

                <image width="60%" source="images/sec3-3-1.png">
                </image>

<p>In the differentiable case, given a function <m>y=f(x)</m>, where we know value of, <m>f'(a)</m>, the derivative of <m>f(x)</m> at <m>x=a</m>, then our linear approximation has the form</p>

<assemblage><p><me>linear\ f_a (x)=f(a)+f'(a)*(x-a).</me></p></assemblage>

                <image width="60%" source="images/sec3-3-2.png">
                </image>

<p>The two formulas are almost the same.  The discrete case uses the slope of a secant line obtained by looking at points where the x values differ by 1.  In the differentiable case we look at the slope of the tangent line.  One of the reasons for looking at the linear approximation of a function is that linear functions are easy to evaluate.</p>

<example><title>Estimating profit</title>
<p>  The profit from selling 10,000 gizmos is $487,253.  We also know that marginal profit(10001)=$45.  Estimate the profit from selling 10,013 gizmos.</p>


<p><term>Solution</term>: We use the formula from above</p>

<assemblage><p><me>discrete\ linear\ profit_a (x)=profit(a)+marginal\ profit(a+1)*(x-a).</me></p></assemblage>

<p>Filling in the values from the problem yields:</p>

<me>discrete\ linear\ profit_{10000} (x)=487253+45*(x-10000).</me>

<me>discrete\ linear\ profit_{10000} (10013)=487253+45*(13)=487838.</me>

<p>Thus we estimate the profit from selling 10013 gizmos to be $487,838.</p>
</example>

<example><title>Estimating square roots</title>
<p><url href="https://youtu.be/hhl9vdXWAlk">Link to video of this example</url></p>
<p> Use information about <m>f(x)=\sqrt{x}</m> near <m>x_0=100</m> to estimate the square roots of 96 through 104.  Check the accuracy of your approximations.</p>

<p><term>Solution</term>:  We first use Excel to find the value of the function and its derivative at 100.  For the derivative we use the calculator approximation.</p>

                <image width="80%" source="images/sec3-3-3.png">
                </image>

                <image width="80%" source="images/sec3-3-4.png">
                </image>

<p>Thus the linear approximation is</p> 

<p><me>\begin{aligned} linear\ f(x) \amp = 
f(100)+f'(100)(x-100) \\ 
\amp =10+(0.05)(x-100). \end{aligned}</me></p>

<p>We can set up the worksheet to compute the approximation and to give us the error, both as a number and as a percentage of the correct answer.</p>
 
                <image width="70%" source="images/sec3-3-5.png">
                </image>
            
                <image width="60%" source="images/sec3-3-6.png">
                </image>


<p>It is then straightforward to compute values and check accuracy.  On the given domain, the linear approximation has an error under 0.03%.</p>
</example>

<example><title>Estimating reciprocals</title>
<p><url href="https://youtu.be/yP4rEOI5xnM">Link to video of this example</url></p>
<p> Use information about <m>f(x)=100/x</m> near <m>x_0=400</m> to estimate the reciprocals of the integers from of 396 through 404.  Check the accuracy of your approximations.</p>

<p><term>Solution</term>:  Once again, we use Excel to find the value of the function and its derivative at 400.  For the derivative we use the calculator approximation.</p>

                <image width="70%" source="images/sec3-3-7.png">
                </image>

<p>Thus the linear approximation is</p> 

<p><me>\begin{aligned} linear\ f(x) \amp = 
f(400)+f'(400)(x-400) \\ 
\amp =.25+(-0.000625)(x-400). \end{aligned}</me></p>


                <image width="60%" source="images/sec3-3-8.png">
                </image>


<p>It is then straightforward to compute values and check accuracy.  On the given domain, the linear approximation has an error under 0.01%.</p>
</example>

<example><title>Estimating exponential functions</title>
<p><url href="https://youtu.be/O4vpT6wOgoE">Link to video of this example</url></p>
<p> For approximating interest with continual compounding it is useful to have a linear approximation of <m>f(r)=exp(r)</m> when <m>r</m> is close to 0.  Use information about <m>f(r)=exp(r)</m> near <m>r_0=0</m> to estimate the exponential function for numbers near 0.  Check the accuracy of your approximations and give a domain where the approximation is good enough to use.</p>

<p><term>Solution</term>:  Once again, we use Excel to find the value of the function and its derivative at 0.  For the derivative we use the calculator approximation.</p>

                <image width="80%" source="images/sec3-3-9.png">
                </image>

<p>Thus the linear approximation is </p>

<p><me>\begin{aligned} linear\ f(x) \amp = 
f(0)+f'(0)(r-0)\\
\amp = 1+(1)(r). \end{aligned}</me></p>



<p>This is much easier to compute than the exponential function.  However when we check accuracy we find that it is not very accurate for other integer values.
</p>

                <image width="60%" source="images/sec3-3-10.png">
                </image>

<p>That brings us back to the last part of the question, which asks for a domain where the approximation is good enough to use.  The phrase <q>good enough to use</q> will depend on the setting, but we will be happy with an estimate that is within 1%.  Since we are going to use this for interest rates, we are interested in positive rates.  </p>
<p>We modify the worksheet to allow a step size, <m>del\ x</m>, to be used.  Then we experiment with step sized till we get a domain where the error is under 1%.</p>

                <image width="60%" source="images/sec3-3-11.png">
                </image>

<p>We see that <m>\exp(r)\approx 1+r</m> for <m>0\le r\lt 0.15</m>. This gives us an approximation we can use for rates of up to 15%.</p>

</example>
<p>The last example illustrates that linear approximations should only be used for a limited domain.  The size of the domain where the linear approximation is <q>good enough</q> will depend on the definition of <q>good enough</q> or the acceptable error in our approximation.  The good domain will also depend on how far the graph is from linear, or how fast it is bending.
</p> 

<exercises xml:id="exercises-set-sec-3-3">
	<title>Exercises: Local Linearity</title>

<exercisegroup><introduction><p>
For problems 1-5, for the given function and value for <m>x_0</m>:</p>
<ol label="(a)">
<li><p>Give the formula for the discrete linear approximation.</p></li>
<li><p>Evaluate the approximation at <m>x_1</m>.</p></li>
</ol>
</introduction>


<exercise ><statement><p> <m>x_0=10</m>, <m>f(10)=50</m>, <m>mf(11)=6</m>, and <m>x_1=15</m>.
</p></statement>
<solution><me>f(x)\approx f(10)+mf(11)*(x-10)</me>
<me>f(x)\approx 50+6*(x-10).</me>
<p>Next we evaluate the linear approximation at 15:</p>
<me>f(15)\approx 50+6*(15-10)=50+30=80.</me>
</solution></exercise>

<exercise ><statement><p>  <m>x_0=15</m>, <m>profit(15)=50</m>, <m>marginal\ profit(16)=2</m>, and <m>x_1=6</m>.
</p></statement></exercise>

<exercise ><statement><p>  <m>x_0=20</m>, <m>f(19)=191</m>, <m>f(20)=200</m>, <m>f(21)=210</m>, and <m>x_1=28</m>.
</p></statement><solution>
<me>f(x)\approx f(20)+mf(21)*(x-20)</me>
<p>Note that we have to compute <m>mf(21)</m></p>
<me>mf(21)=f(21)-f(20)= 210-200=10</me>
<me>f(x)\approx 200+10*(x-20)</me>
<p>Next we evaluate the linear approximation at 28:</p>
<me>f(28)\approx 200+10*(28-20)=200+80=280</me>
</solution></exercise>

<exercise ><statement><p>  <m>x_0=50</m>, <m>revenue(49)=1007</m>, <m>revenue(50)=1000</m>, <m>revenue(51)=994</m>, and <m>x_1=45</m>.
</p></statement></exercise>

<exercise ><statement><p>  <m>x_0=100</m>, <m>cost(99)=3740</m>, <m>cost(100)=3743</m>, <m>cost(101)=3754</m>, and <m>x_1=112</m>.
</p></statement><solution>
<me>cost(x)\approx cost(100)+mcost(101)*(x-100)</me>
<p>Note that we have to compute <m>mcost(101)</m></p>
<me>mcost(101)=cost(101)-cost(100)=3754-3743=11 </me>
<me>cost(x)\approx3743+11*(x-100)</me>
<p>Next we evaluate the linear approximation at 112:</p>
<me>cost(112)\approx 3743+11*(112-100)=3743+132=3875</me>
</solution></exercise>
</exercisegroup>

<exercisegroup><introduction>
<p>For problems 6-10, for the given function and value for <m>x_0</m>:</p>
<ol label="(a)">
<li><p>Calculate the numeric approximation of the derivative at <m>x_0</m>.</p></li>
<li><p>Give the formula for the linear approximation at that point.</p></li>
<li><p>Evaluate the approximation at <m>x_1</m>.</p></li>
<li><p>Evaluate the function at <m>x_1</m> and compute the accuracy of the approximation.</p></li>
</ol>
</introduction>

<exercise ><statement><p>  <m>f(x)=\ln(x)</m>, <m>x_0=100</m>, and <m>x_1=105</m>.
</p></statement></exercise>

<exercise ><statement><p>  <m>g(x)=\sqrt{x}</m>, <m>x_0=81</m> and <m>x_1=85</m>.
</p></statement><solution>
<ol label="(a)">
<li><me>g(x)\approx g(81)+g'(81)*(x-81)</me>
<p>Note that <m>g(81)=\sqrt{81}=9</m> and</p> 
<me>g'(81)\approx \frac{g(81+.001)-g(81-.001)}{0.002}=  \frac{\sqrt{81.001}-\sqrt{80.999}}{0.002}=.056</me>
</li>
<li><me>g(x)\approx 9+0.056*(x-81)</me></li>
<li><p>Hence at <m>x_1=85</m> we get</p>
<me>g(85)/approx 9+0.056*(85-81)=9+0.056*4=9+0.23=9.23</me>
</li>
<li><p>If we compute <m>\sqrt{85}=9.22</m>, we see that the approximation is fairly good.</p>
<p>The error is <m>|real\ value-approximation|=|9.22-9.23|=|-0.01|= 0.01</m>.</p>
</li>
</ol>
</solution></exercise>

<exercise ><statement><p>  <m>profit(x)=-x^2/10+3000x-7862</m>, <m>x_0=2000</m> and <m>x_1=2050</m>.
</p></statement></exercise>

<exercise ><statement><p>  <m>revenue(x)=x*\ln(x)</m>, <m>x_0=3000</m> and <m>x_1=3100</m>.
</p></statement><solution>
<ol label="(a)">
<li><me>revenue(x)\approx revenue(3000)+revenue'(3000)*(x-3000)</me>
<p>Note that <m>revenue(3000)\approx 24019</m> and</p> 
<me>revenue'(3000)\approx \frac{revenue(3000.001)-revenue(2999.999)}{0.002}=  9.00636</me>
</li>
<li><me>revenue(x)\approx 24019+9.00636*(x-3000)</me></li>
<li><p>Hence at <m>x_1=3100</m> we get</p>
<me>revenue(3100)/approx 24019+9.00636*(3100-3000)=24919.7</me>
</li>
<li><p>If we compute <m>revenue(3100)=24921.4</m>, we see that the approximation is fairly good.</p>
<p>The error is <m>|real\ value-approximation|=|1.66485|= 1.66485</m>.</p>
</li>
</ol>
</solution></exercise>

<exercise ><statement><p>  <m>cost(x)=(x*\ln(x))/2+x^2/300</m>, <m>x_0=3000</m> and <m>x_1=3100</m>.
</p></statement></exercise>
</exercisegroup>

<exercise ><statement><p>  Let <m>f(x)=(1+x)^r</m> and <m>x_0=0</m>.</p>
<ol label="(a)">
<li><p>Find the linear approximation of <m>f(x)</m> at <m>x_0</m> for r=1/3,1/2,-1 and 2.</p></li>
<li><p>Give a rule for the linear approximation for a general value of r.</p></li>
<li><p>How accurate is the linear approximation for square and cube roots of 1.1, obtained at <m>x_1=0.1</m>.</p></li>
</ol></statement><solution>
                <image width="60%" source="images/sec3-3-sol11a.png">
                </image>

<ol label="(a)">
<li><p>The linear approximation of <m>f(x)</m> at <m>x=0</m> is <m>f(0)+f'(0)(x)</m>.  For all values of <m>r</m> we have <m>f(0)=1</m>.  As the table shows when <m>r=1/3,1/2,-1</m> and 2, we have <m>f(x)\approx 1+r x</m></p></li>
<li><me>f(x) \approx 1+r*x</me></li>
<li><p>As the table shows, the error for using these approximations for the square root and cube root of 1.1 is approximately 0.001.</p></li>
</ol>
</solution></exercise>

</exercises>
        </section>
 
         <section xml:id="sec-3-4-Optimization">
            <title>Optimization</title>

          <p><url href="Examples/Section-3-4-Examples.xlsx">Link to worksheets used in this section</url></p>
            <p>In Section 3.2 we noticed that the high and low points of the graph of a function often coincided with a point where the derivative of the function was 0.  In a business setting, we are often concerned with finding the maximum and minimum values of a function, because one or the other will be a best, or optimum value.  We typically want to maximize functions like profit, utility, revenue, and market share.  We typically want to minimize functions like cost and liability.  We will use the same basic process to optimize, whether the extremum we are finding is a maximum and minimum.</p>
            
<p>Recall, we said that the derivative can be thought of as the slope of the apparent line, obtained by zooming in on the graph of a function.  Clearly, we cannot have an extremum at an interior point of the domain if the derivative is nonzero, because we could go either higher or lower by moving a little to the right or left.  Thus we can only have extrema at a critical point, a place when the derivative is zero or undefined, or at an endpoint where we cannot go both left and right.  This gives us a small list of candidate points for the optimum value.</p>

<p>Our process for optimization will be to find all the candidate points, then to see which gives the highest and lowest values.  When our curve has a point that is a maximum or minimum in some interval around the point, we call it a <q>relative</q> maximum or minimum.  If it is the highest or lowest point for the whole domain of the function it is called a <q>global</q> maximum or minimum.</p>
	
<example>
<title>Profit function for widgets</title>

<p><url href="https://youtu.be/Q8w-CjhtcQE">Link to video of this example</url></p>

  <p>We have determined that the profit function for selling widgets is</p>

<me>profit(quantity)=quantity*(400-quantity)-5000,</me>
 
<p>with the function valid on the interval <m>0\le quantity\le 500</m>.  Find the minimum and maximum profit in the given interval.</p>

<p><term>Solution A</term>: The first example was chosen because it can be done without using any calculus, so we solve it with easier methods first.  The profit function is a quadratic function in quantity, so it is a downward pointing parabola.  The location of the vertex is at <m>quantity=200</m>, which we obtain from the coefficients of the quadratic and linear terms.  Thus we need to check this point and the two endpoints.  Plugging in values, we get <m>(0,-5000)</m>, <m>(200, 35000)</m> and <m>(500, -55000)</m>.  The maximum occurs when we sell 200 widgets and our profit is $35,000, the minimum occurs when we sell 500 widgets and our loss is $55,000.  A relative minimum occurs when we sell 0 widgets and our loss is $5,000.</p>

<p><term>Solution B</term>:  We want to set up the problem to be able to graph the profit function and its derivative on the same graph.  We will us the calculator approximation of the derivative.  As we did in the last section, we set up a worksheet with columns for, <m>q</m>, <m>q+.001</m>, <m>q-0.001</m>, <m>p(q)</m>, <m>p(q+.001)</m>, <m>p(q-0.001)</m>, and <m>p'(q)</m>.  This allows most of the worksheet to be filled in with quick fill.</p>

                <image width="100%" source="images/sec3-4-1.png">
                </image>

<p>We then look at the values, and compare the table to a graph.  We find the same three candidate points and the same maximum and minimum values.</p>

                <image width="80%" source="images/sec3-4-2.png">
                </image>
</example>

<p>For a second example we want to look at a function where we canâ€™t find the maximum by algebraic means.</p>

<example>
<title> Cumquat oil</title>

<p><url href="https://youtu.be/6ICUxS6-g0Q">Link to video of this example</url></p>

<p>  We have determined that the profit function for selling cumquat oil is</p>

<me>profit(quantity)=(10quantity-20)*exp(-quantity/50)-10.</me>
 
<p>We understand that the function is valid on the interval <m>0\le quantity\le 400</m>, where the quantity is measured in thousands of pints and profit is measured in thousands of dollars.  Find the minimum and maximum profit in the given interval.</p>

<p><term>Solution</term>:  The spreadsheet is set up like it was in the first example, but with the function changed.</p>

                <image width="100%" source="images/sec3-4-3.png">
                </image>

<p>Looking at the graph and the chart we expect to find local minima at the endpoints, and the maximum when q is close to 50.  We use goal seek to find where the derivative is zero.  As we see below, Goal Seek does not find a point where the derivative is zero.  Instead it finds a point where the derivative is <q>close enough</q> to zero.  By default, <q>close enough</q> is understood by Excel as being within 0.001.</p>

                 <image width="70%" source="images/sec3-4-4.png">
                </image>

<p>If the default definition of <q>close enough</q> is good enough for our purposes, then the maximum profit of $166,727 occurs when we sell 51,998 pints of oil.  (In fact, selling 2 more pints of oil will yield an extra 0.01 cents.)  The minimum profit occurs when we sell no product, in which case we have a loss of $30,000.</p>
</example>

<p>One of the things to notice about the last example is the robustness of the method.  From an algebraic point of view, the function was rather ugly.  All we needed to know to use the method was that the function was smooth enough, that when we zoomed in to a scale of x changing by 0.001 the graph looked like a straight line.</p>

<p>Throughout the section we have looked for places where the derivative is zero when looking for extrema.  We have not paid any attention to how we decide if the point we find is a local maximum or a local minimum.  There are several approaches we could use.  Since we are computing the derivative we could note that a local maximum is a place where the function goes from increasing to decreasing, so the derivative goes from positive to negative.  (Similarly, a local minimum is at a place where the derivative goes from positive to negative.)  There is also a test that looks at the derivative of the derivative.  Those tests will be more useful in the next chapter when we are finding a formula for the derivative by symbolic means.  However, with the numeric technique we are using, the easiest test is that a local maximum is greater than or equal to points a little bit to both the left and right.  We simply plug in points a little bit to each side to test.  Since a change in q of 0.001 makes the graph look like a flat straight line, we change q by 0.01.</p>

                <image width="50%" source="images/sec3-4-5.png">
                </image>

<p>As expected, profit goes down as we move away from our expected maximum.</p>

<example>
<title> Gizmo profit</title>

<p><url href="https://youtu.be/BG0W-F1oeXk">Link to video of this example</url></p>

<p>  A plant can produce between 150 and 300 gizmos.  The profit function for the plant is:</p>

<me>profit(quantity)=4 quantity^2-1300 quantity+125000.</me>

<p>Find the production level that maximizes profit.</p>

<p><term>Solution</term>: We set up the problem as before, using goal seek on the derivative to find critical points, and checking the ends of the interval.</p>

                <image width="70%" source="images/sec3-4-6.png">
                </image>
 
<p>We have three candidates for the extrema, the two endpoints and the critical point at 162.5.  However by looking at the points to the side of the critical point, we see it is a local minimum.  We also see, that of our 3 candidate points, the one that gives the maximum profit is the right endpoint, when quantity is 300.</p>

<p>For our first three examples we have been trying to find the minimum or maximum of a functions that has been given to us as a function of one variable.  Sometimes we need to do a bit of work to get the function in that format.</p>
</example>

<example><title>Minimizing material costs</title>

<p><url href="https://youtu.be/5MO904y3fOw">Link to video of this example</url></p>

<p>I am manufacturing goop, a liquid that needs to be put in cans.  We will use cans that have a standard cylindrical shape.  Find the height and radius of a 1 liter can that uses a minimal amount of metal surface.</p>

                <image width="50%" source="images/sec3-4-7.png">
                </image>

<p><term>Solution</term>: Using basic geometry we recall the formulas for the volume and surface area of a cylinder. </p>

<me>volume= \pi radius^2*height</me>

<me>area=2 \pi radius^2+2 \pi*radius*height</me>

<p>Since I am measuring volume in liters, I want to measure radius and height in decimeters so the units work correctly.  In order to optimize, we need to reduce the problem to a single function of a single variable.  We are told that the volume is 1, so we can solve for height as a function of radius, then plug it into the equation for area.  Then area is a function of a single variable, radius, and we can find the critical points and check for a minimum.</p>

<me>height=1/( \pi radius^2)</me>

<me>area=2 \pi radius^2+2 /radius</me>

<p>Since we now have area as a function of the single variable radius we can take a derivative to find the critical point, then find the optimal shape.</p>

                <image width="90%" source="images/sec3-4-8.png">
                </image>

<p>Solving for where the derivative of area is zero, we find the radius of the can should be 0.5419 deciliters.  We plug that value back into the formula for height in terms of radius and see that the height should be 1.083854 deciliters.  To understand the shape of the can we see that the height is twice the radius, or the same thing as the diameter of the can.  The can is optimally shaped when it is the shape of a large paint can.</p>
</example>

<p>There are three technical details worth mentioning from the last example.  First, in Excel, the best way to put <m>\pi</m> in a formula is with the constant PI(). Second, the function for area is defined on an open interval where the radius is positive.  There is no maximum area for a can of fixed volume.  (However inefficient our can is, we can always make it worse, by moving farther from the optimum.)  Third, one should also note that for this problem, we wanted several numbers as part of our answer.  The worksheet for the problem puts the best height and radius at the top, where the reader can easily 
find it.</p>

<p>In this last example we had to reduce two equations in two unknowns to a single equation in one unknown to be able to optimize.  We may also need to produce an equation from data.</p>

<example><title>Maximized profits and break-even points</title>

<p><url href="https://youtu.be/wimpz29YypU">Link to video of this example</url></p>

<p>For widget production and sales we have the following data on profit based on sales.</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Quantity</cell>
<cell>10</cell>
<cell>100</cell>
<cell>200</cell>
<cell>250</cell>
<cell>300</cell>
<cell>400</cell></row>                    
<row bottom="minor">
<cell>Profit</cell>
<cell>-$2,083</cell>
<cell>$31,040</cell>
<cell>$48,587</cell>
<cell>$49,845</cell>
<cell>$46,146</cell>
<cell>$23,670</cell></row>   
                </tabular>

<p>Find the break even points and the quantity that maximizes profit.</p>

<p><term>Solution</term>:  From looking at a quick plot of the data, I am going to assume that the profit function is a downward facing parabola, so I find the best fitting quadratic polynomial for the data.  Using trendlines, my profit function is</p>

<me>profit(q)=-1.002 q^2+477.22 q=6720.9.</me>

                <image width="70%" source="images/sec3-4-9.png">
                </image>

<p>I now set up the table for special values with goal seek.  I use starting points of 20 and 450 for the break even points and 250 for the maximum.  To find break even points, I Goal Seek on the profit function.  To find the maximum point, I Goal Seek on the derivative of the profit function.</p>

                 <image width="70%" source="images/sec3-4-10.png">
                </image>

<p>Rounding to the nearest whole number in each case, my break even points are for selling 15 and 460 widgets.  My maximum profit of $50,032 occurs when I sell 238 widgets.</p>
</example>

<example><title>Minimizing expenses</title>

<p><url href="https://youtu.be/ioyz19BK6Vk">Link to video of this example</url></p>

<p> We are running a business and want to minimize equipment expenses.  For a particular piece of equipment the costs can be broken into initial outlays to buy the equipment, fixed annual expenses to keep the equipment in the inventory, and repair costs which we anticipate rising as the equipment gets older.  A widget press costs $10,000 to buy, and the operating expenses are $500 a year, and the total repair costs are <m>300t^2</m> over the first <m>t</m> years.  What is the optimal length of time to use a widget press before replacing it?</p>

<p><term>Solution</term>:  My annual cost equation is total cost divided by t.  This annual cost is:</p>
<me>AnnualCost(t)=10000/t+500+300t.</me>

<p>I create a spreadsheet that calculates the cost and its derivative over the first 10 years.</p>

                <image width="70%" source="images/sec3-4-11.png">
                </image>

<p>Looking at the data, the minimal annual cost is obtained by keeping the press between 5.5 and 6.0 years.  Using Goal seek on the derivative, I find the minimal annual cost of $3,964.10 is obtained by keeping the press for 5.77 years.
</p> 
</example>

<exercises xml:id="exercises-set-sec-3-4">
	<title>Exercises: Optimization</title>

<exercisegroup><introduction>
<p>
For problems 1-10, for the given function and domain:</p>
<ol label="(a)">
<li><p>Plot the function and its derivative on the same graph.</p></li>
<li><p>Identify the regions where the function is increasing and the regions where the function is decreasing.</p></li>
<li><p>Identify the local maximum and minimum for the given domain.</p></li>
<li><p>Identify the global maximum and minimum for the given domain</p></li>
</ol>
</introduction>


<exercise ><statement><p> <m>f(x)=-2x^2+17x+23</m> on the interval <m>0\le x\le 50</m>.
</p></statement><solution>
<p>Setting up these problems in Excel follows the same process.</p>
<ul>
<li><p>We create columns for <m>x, x+.001, x-.001, f(x), f(x+.001), f(x-.001)</m>,and <m>f'(x)</m></p></li> 
<li><p>Once you enter <m>f(x)</m>, doing a right quick fill easily finds <m>f(x+.001)</m> and <m>f(x-.001)</m>, and then <m>f'(x)</m> is easy to compute.</p></li>
<li><p>Once you graph <m>f</m> and <m>f'</m>, it is usually a good idea to graph the derivative using the secondary axis: double click on the derivative function and choose the appropriate button in the dialogue box.</p></li>
</ul>

<ol label="(a)">
<li>  
                <image width="80%" source="images/sec3-4-sol1a.png">
                </image>
<p>The table is truncated at <m>x = 25</m>, but the rest was used to create the graph.</p></li>
<li><p>We can do a Goalseek to find the critical point: set <m>f'(x)=0</m>.</p>
<p>In this example <m>f'(x)=0</m> when <m>x = 4.25</m></p>
<p>The function <m>f</m> is increasing for <m>0\lt x \lt 4.25</m>.</p>
<p>The function <m>f</m> is decreasing for <m>x\gt 4.25</m>
</p></li>
<li><p>The function has a local max at <m>x = 4.25</m> and the maximum value is <m>59.13</m></p>
<p>The only local minimums are the endpoints, <m>(0, 23)</m> and <m>(50, -4127)</m>.</p></li>
<li><p>To find the global maximum and minimum we check the endpoints and the critical points</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell><m>x</m></cell>
<cell><m>f(x)</m></cell>
<cell>status</cell>
</row>                    
<row bottom="minor">
<cell>0</cell>
<cell>23</cell>
<cell></cell>
</row>   
<row bottom="minor">
<cell>4.25</cell>
<cell>59.13</cell>
<cell>maximum</cell>
</row>   
<row bottom="minor">
<cell>50</cell>
<cell>-4127</cell>
<cell>minimum</cell>
</row>   
                </tabular>
<p>The global minimum value is  <m>-4127</m> at <m>x=50.</m></p>
<p>The global maximum value is  <m>59.13</m> at <m>x=4.25</m>
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> <m>g(x)=-3x^2+18x+25</m> on the interval <m>10\le x\le 50</m>.
</p></statement></exercise>

<exercise ><statement><p> <m>h(x)=x^3-9x+12</m> on the interval <m>0\le x\le 10.</m>
</p></statement><solution>
<ol label="(a)">
<li>  
                <image width="80%" source="images/sec3-4-sol3a.png">
                </image>
</li>
<li><p>The place where <m>f'(x)=0</m> is at <m>x = 1.73</m></p>
<p>The function <m>f</m> is decreasing for <m>0\lt x \lt 1.73</m>.</p>
<p>The function <m>f</m> is increasing for <m>1.73 \lt x\lt 10</m>
</p></li>
<li><p>The function has a local minimum at <m>(1.73, 1.61)</m>.</p>
<p>The function has a local maximums at <m>(0, 12)</m> and <m>(10, 922</m>.</p></li>
<li><p>To find the global maximum and minimum we check the endpoints and the critical points</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell><m>x</m></cell>
<cell><m>f(x)</m></cell>
<cell>status</cell>
</row>                    
<row bottom="minor">
<cell>0</cell>
<cell>12</cell>
<cell></cell>
</row>   
<row bottom="minor">
<cell>1.73</cell>
<cell>1.61</cell>
<cell>minimum</cell>
</row>   
<row bottom="minor">
<cell>10</cell>
<cell>922</cell>
<cell>maximum</cell>
</row>   
                </tabular>
<p>The global minimum value is  <m>1.73</m> at <m>x=1.61.</m></p>
<p>The global maximum value is  <m>922</m> at <m>x=10</m>
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> <m>k(x)=x^3-6x^2+12x+5</m> on the interval <m>0\le x\le 10</m>.
</p></statement></exercise>

<exercise ><statement><p> <m>m(x)=5x+9</m> on the interval <m>-10\le x\le 30</m>.
</p></statement><solution>
<ol label="(a)">
<li>  
                <image width="80%" source="images/sec3-4-sol5a.png">
                </image>
</li>
<li><p>The derivative is never zero</p>
<p>The function <m>m(x)</m> is always increasing for <m>-10 \lt x\lt 30</m>
</p></li>
<li><p>The function has a local minimum at <m>(-10, -41)</m> and a local maximum at <m>(30, 159)</m>.</p></li>
<li>
<p>The global minimum value is  <m>-41</m> at the left endpoint <m>x=-10.</m></p>
<p>The global maximum value is  <m>159</m> at the right endpoint <m>x=30</m>
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p>  <m>n(x)=42</m> on the interval <m>0\le x\le 10</m>.
</p></statement></exercise>

<exercise ><statement><p> <m>f(x)=(x-3)\exp(-0.02 x)</m> on the interval <m>0\le x\le 100</m>.
</p></statement><solution>
<ol label="(a)">
<li>  
                <image width="80%" source="images/sec3-4-sol7a.png">
                </image>
</li>
<li><p>The place where <m>f'(x)=0</m> is at <m>x = 52.95</m></p>
<p>The function <m>f</m> is increasing for <m>0\lt x \lt 52.95</m>.</p>
<p>The function <m>f</m> is decreasing for <m>52.95 \lt x\lt 100</m>
</p></li>
<li><p>The function has a local max at <m>x = 52.95</m> and the maximum value is <m>17.32</m></p>
<p>The function has a local minimum at <m>(0, -3)</m> and <m>(100, 13.13)</m>.</p></li>
<li><p>To find the global maximum and minimum we check the endpoints and the critical points</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell><m>x</m></cell>
<cell><m>f(x)</m></cell>
<cell>status</cell>
</row>                    
<row bottom="minor">
<cell>0</cell>
<cell>-3</cell>
<cell>minimum</cell>
</row>   
<row bottom="minor">
<cell>52.95</cell>
<cell>17.32</cell>
<cell>maximum</cell>
</row>   
<row bottom="minor">
<cell>100</cell>
<cell>13.13</cell>
<cell></cell>
</row>   
                </tabular>
<p>The global minimum value is  <m>-3</m> at <m>x=0.</m></p>
<p>The global maximum value is  <m>17.32</m> at <m>x=52.95</m>
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> <m>g(x)=(x^3-9 x)exp(-0.1 x)</m> on the interval<m> 0\le x\le 100</m>.
</p></statement></exercise>

<exercise ><statement><p> <m>h(x)=100/x+5 x</m> on the interval <m>1\le x\le 50</m>.
</p></statement><solution>
<ol label="(a)">
<li> 
                <image width="80%" source="images/sec3-4-sol9a.png">
                </image>
</li>
<li><p>The place where <m>f'(x)=0</m> is at <m>x = 4.47</m></p>
<p>The function <m>h</m> is decreasing for <m>1\lt x \lt 4.47</m>.</p>
<p>The function <m>h</m> is increasing for <m>4.47 \lt x\lt 50</m>
</p></li>
<li><p>The function has a local min at <m>x = 4.47</m> and the minimum value is <m>44.72</m></p>
<p>The function has a local maximums at <m>(1, 105)</m> and <m>(50, 252)</m>.</p></li>
<li><p>To find the global maximum and minimum we check the endpoints and the critical points</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell><m>x</m></cell>
<cell><m>h(x)</m></cell>
<cell>status</cell>
</row>                    
<row bottom="minor">
<cell>1</cell>
<cell>105</cell>
<cell></cell>
</row>   
<row bottom="minor">
<cell>4.47</cell>
<cell>44.73</cell>
<cell>minimum</cell>
</row>   
<row bottom="minor">
<cell>50</cell>
<cell>252</cell>
<cell>maximum</cell>
</row>   
                </tabular>
<p>The global minimum value is  <m>44.73</m> at <m>x=4.47.</m></p>
<p>The global maximum value is  <m>252</m> at <m>x=50</m>
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p>  <m>k(x)=75/x+3 x^2</m> on the interval <m>1\le x\le 50</m>.
</p></statement></exercise>
</exercisegroup>

<exercise ><statement><p> The demand price for widgets is given by <m>price(q)=300-0.5q</m>.  The fixed costs are $7,500 and the variable costs are $10 per widget.</p>
<ol label="(a)">
<li><p> Give a profit function for widgets.  Specify the domain on which the function makes sense.</p></li>
<li><p> Identify the candidate points for maximizing profit.</p></li>
<li><p> Give the quantity that maximizes profit along with the maximum profit.
</p></li>
</ol></statement><solution>
<p>Preliminary work: find the formulas for price (given) and cost (described).</p>
<me>price(q)=300-0.5q</me>
<me>cost(q)=10 q+7,500</me>
<ol label="(a)">
<li>
<me>profit(q)=revenue(q)- cost(q)</me>
<me>= 300q-0.5 q^2-10q-7500</me>
<me>= -0.5 q^2+290q-7500</me>
<p>One assumption that makes sense is that the price should be positive. </p>
<me>price(q)=300-0.5q \gt 0  </me>
<me> -0.5 q \gt -300 </me>
<me> q \lt 600</me>
</li>
<li><p> We find profit and the derivative of the profit function to determine where the derivative is 0. Below is the graph of <m>Profit, Profit'</m> and we did GoalSeek to find the critical point (x=290).  We should also consider endpoints, but the vertex is clearly above 0.
                <image width="80%" source="images/sec3-4-sol11a.png">
                </image>
</p></li>
<li><p> The profit is maximized at 290 and the maximum profit is $34,550</p></li>
</ol></solution></exercise>

<exercise ><statement><p> The cost equation for gizmos is <m>Cost(q)=1000+3q</m> and the demand function is <m>price(q)=500-3q</m>.  Find the maximum profit.
</p></statement></exercise>

<exercise ><statement><p> The cost equation for gadgets is <m>Cost(q)=1000+2q+.0001q^2</m> and the demand function is <m>price(q)=100/(1+.01q)</m>.  Find the maximum profit.
</p></statement><solution>
<me>profit(q)=revenue(q)- cost(q)</me>
<me>=q*100/(1+.01q)- (1000+2q+.0001q^2</me> )
<p>Assuming that the price should be a positive number does not help us in this problem. We can check, but all we get is that <m>q \gt -100</m>, but <m>q</m> should be positive.</p>
<p>If domain restrictions are not obvious or the algebra is challenging we can resort to trial and error.  The small coefficients (.0001 for instance) do suggest we have fairly large values for <m>q</m>.</p>
                <image width="80%" source="images/sec3-4-sol13a.png">
                </image>
<p>Using <m>0\lt q\lt 1000</m>, we see that there is a maximum near <m>q = 600</m>.
Goal Seek shows that the critical point is at <m>q = 588</m> gadgets.
The maximum profit is $6336.</p>
</solution></exercise>

<exercise ><statement><p> The cost equation for gizmos is <m>Cost(q)=10000+10q</m> and the demand function is <m>price(q)=100/\sqrt{1+.01q}</m>.  Find the maximum profit.
</p></statement></exercise>

<exercise ><statement><p> Suppose the cost function for your operation is <m>Cost(q)=10000+10q+20000/(1+.1q)</m>. Find the quantity that minimizes price.
</p></statement><solution>
<p>The function is interesting in that the minimum cost is not easily see on the graph.</p>
                <image width="80%" source="images/sec3-4-sol15a.png">
                </image>
<p>
The function is graphed for <m>0\le q\le 150</m> in steps of 10. The cost function almost looks as though it is leveling out and reaching an asymptote.
An inspection of the table shows that this is not true. The derivative goes from negative to positive right around 130. GoalSeek shows that the derivative is zero at approximately 131.42. The recorded Cost is $12,728.40, which is the minimal cost for this function.</p>
</solution></exercise>

<exercise ><statement><p> Suppose your cost function is <m>Cost(q)=10000(0.8)^{.1q}+.1q^2</m>.  Find the quantity that minimizes price.
</p></statement></exercise>

<exercise ><statement><p>  With rental property, a simplified model of costs spreads the purchase cost over the time that the property is held and assume that repair costs will rise the longer the property is held.  This gives a formula for annual expenses as
<me>AnnualExpense(t)=(PurchasePrice)/t+RepairFactor*t^r</me>
 where r is a positive number that depends on the type of property.  Assume for carpet cleaners that the replacement cost is $600, that the repair costs in the first year are $50, and r=1.  Find the length of time the property should be held to minimize the annual expense.
</p></statement><solution>
<p>In this instance the Annual Expense function is</p>
<me>AnnualExpense(t)=600/t+50*t^1=600/t+50t</me>
<p>Note that the function is not defined when <m>t = 0</m>. So we will graph the function and the derivative for <m>1 \le t \le 10</m>. The property should be held for 3.5 years.</p>
                <image width="80%" source="images/sec3-4-sol17a.png">
                </image>
 
</solution></exercise>

<exercise ><statement><p> With rental property, a better model factors in the depreciation of the property and how much can be recovered by selling the property used.  If we use a 5 year straight line depreciation the formula becomes
<me>AnnualExpense(t)=(PurchasePrice*(1-0.2t))/t+RepairFactor*t^r</me>
Repeat the assumptions from the problem above.  Assume for carpet cleaners that the replacement cost is $600, that the repair costs in the first year are $50, and <m>r=1</m>.  Find the length of time the property should be held to minimize the annual expense.
</p></statement></exercise>


<exercise ><statement><p> The annual sales rate for a new toy is found to be 
<m>Sales(t)=10000 t^2  \exp(-t^2/16)</m>.
Find the month that maximizes sales.
</p></statement><solution>
<p>If we are minimizing according to month, we will graph the function for <m>1 \le t \le 12</m></p>
                <image width="80%" source="images/sec3-4-sol19a.png">
                </image>
<p>GoalSeek does not improve our estimate, and we see that the maximum sales must occur when <m>t = 4</m>. The derivative is (close to) 0 there and this means our sales are maximized in April (assuming 1 represents January). </p>  
</solution></exercise>

<exercise ><statement><p> Consider the following sales data for your business.</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Production level</cell>
<cell>1903</cell>
<cell>2424</cell>
<cell>3065</cell>
<cell>3424</cell>
<cell>4076</cell></row>                    
<row bottom="minor">
<cell>Profit</cell>
<cell>$828,560.10</cell>
<cell>$942,625.40</cell>
<cell>$1,006,167.50</cell>
<cell>$987,980.40</cell>
<cell>$929,780.40</cell></row>   
                </tabular>
<ol label="(a)">
<li><p>Plot the data and find a reasonable best fitting curve for the data.</p></li>
<li><p>Find the production level that maximizes profit.</p></li>
<li><p>Find the maximum profit.</p></li>
</ol></statement></exercise>

</exercises>
        </section>
 
         <section xml:id="sec-3-5-IntroductionSolver">
            <title>An Introduction to Solver</title>

          <p><url href="Examples/Section-3-5-Examples.xlsx">Link to worksheets used in this section</url></p>
            <p>	We should expect, whenever we look at an operation that is used a lot in the business world, that Excel will have a fairly simple command to achieve the result.  In section 1.5 we introduced Goal Seek, a tool that is part of Excel, and that can be used to solve an equation for a root from a given starting point.  In the last section, we noted that one can find candidates for a local maximum or minimum of a function by finding the derivative and using Goal Seek to find where the derivative is 0.  In this section we introduce Solver, an Add-In to Excel.  It is easiest to think of solver as a more powerful version of Goal Seek.  It will be easiest to walk through the use of Solver while working an example.</p>

<example><title>Use Solver to gather information about the graph</title>
<p><url href="https://youtu.be/vBGPmtXB_VY">Link to video of this example</url></p>
<p>Let <m>f(x)=9 x-x^2+7</m> on the interval <m>-1\le x \le 14</m>.</p>

<p><term>Solution</term>:  As always, we start by using simpler tools.  In this case it is useful to have Excel sketch a graph and to use information we gathered in prior course.  From the form of the function we know the graph is a parabola that points downwards.</p>

                <image width="70%" source="images/sec3-5-1.png">
                </image>

<p>Looking at the chart and the picture we see that the vertex is close to <m>x=4.5</m>.  We also see that the x-intercepts are close to <m>x=-0.5</m> and <m>x=9.5</m>. </p>

<p>Next, we want to make sure that Solver is installed.  It should be on the Analysis section of the Data tab.</p>

                <image width="30%" source="images/sec3-5-2.png">
                </image>
 
<p>If you donâ€™t find it there, you should go to the online help for Excel, and look for help on Solver.  Under the topic <q>Define and solve a problem by using Solver</q>, select first <q>Define and solve a problem</q>, then <q>If you donâ€™t see Solver under Analysis on the Data tab</q>.  </p>
<p>We first want to use Solver to find a root.  Using the same approach we used with Goal seek, we would like cell B5 to be set equal to 0 by changing the value of Call A5.  (As we have set up the problem, we could use solver starting with any of the cells that give a value for f(x).  I chose the one that has f(x) closest to the desired result.)</p>

                <image width="70%" source="images/sec3-5-3.png">
                </image>

<p>Solver finds a solution with <m>x=-0.72015</m>.  We are given a dialog box that asks if we want to keep the solver solution or restore our original value.</p>

                <image width="70%" source="images/sec3-5-4.png">
                </image>

<p>As with Goal Seek, if we use Solver again, starting with x closer to 9, we will find a solution <m>x=9.72015</m>.</p>

<p>However, the reason we introduce Solver, is that it can do things would be more difficult with Goal Seek.  From the graph, and our knowledge or parabolas, we know the graph has a single maximum.  To find the maximum with Goal Seek, we need to realize that the maximum occurs when the derivative is 0, define the numerical derivative, then set the derivative equal to 0.  With Solver, we simply ask it to find the maximum.  It finds the vertex at <m>x=4.5</m>.</p>

                <image width="70%" source="images/sec3-5-5.png">
                </image>

<p>We also would like to be able to find a minimum.  From the picture, we know that a downward pointing parabola has no absolute minimum.  However, in business, we are typically concerned with functions defined on a finite domain.  For this problem, consider only the interval <m>0\le x\le 15</m>.  We want the minimum to appear in cell B7, so we want to constrain cell A7.  If we start Solver, then hit the add button, we get a dialog box to enter the first constraint, that A7<m>\ge </m>0.</p>

                 <image width="40%" source="images/sec3-5-6.png">
                </image>

<p>In a similar manner, we add the constraint that A7 15 and ask solver for a minimum.</p>

                <image width="70%" source="images/sec3-5-7.png">
                </image>

<p>Since we started the search for the minimum at x=0.5, Solver finds the minimum at x=0.  This is a <q>local minimum</q>.  Any x value in the interval that is close by gives a higher value for the function.</p>

<p>We would also like to find the minimum at the other end of the interval.  To do that it is useful to know a bit of the mathematics behind what solver is doing.  Solver uses derivatives from the starting point to decide on the direction it should look and how far it should go to find the next guess for its answer.  This is a modification of a technique called Newtonâ€™s method.  In terms of our picture, depending on whether we tell it to find a maximum, minimum, or specified value, Solver tries to slide up or down the graph until it finds a good candidate, which it gives us as a solution.  It is actually looking for the first local maximum or minimum it gets to.  It does not look for other candidates.  So if we started at x=0.5 it will slide to the left to find an answer.  To find the minimum at the other end of the interval we need a starting point where the graph is already sloping down to the right. Starting at x=8 should work.  We set up solver.</p>

                <image width="70%" source="images/sec3-5-8.png">
                </image>

<p>Solver finds that the curve had a minimum at x=15 with f(x)=-83.</p>
</example>

<p>To recap, using Solver on the interval <m>0\le x\le 15</m>, we found has a root at <m>x=9.72015</m>, a maximum at <m>x=4.5</m>, and local minimums at <m>x=0</m> and <m>x=15</m>.  We also found the values of <m>f(x)</m> at all of those points.  However, this example was chosen because we could get the same results with work by simply using the properties of parabolas.  Thus, we now want to ask the same questions about a problem we cannot solve algebraically.</p>


<example><title> A deceptive graph</title><p>  Use solver to gather information, on the interval <m>0\le x\le 15</m>, on the graph of <m>f(x)=(x^3-4x^2+4x+3) e^{(-x/2)}</m>.</p>
<p><url href="https://youtu.be/80rgSBoubTk">Link to video of this example</url></p>
<p><term>Solution</term>:  As always, start by looking at a graph.</p>

                <image width="70%" source="images/sec3-5-9.png">
                </image>

<p>From the graph I expect the function has no roots on the interval.  It has local minimums near 0, 2.5, and 10.  It has local maximums near 0.5, and 8.  I will need to add constraints to find the local minimums at the boundaries.  To make my worksheet easy to read I add two extra columns for the x and y values of interesting point, and fill in guesses.</p>

                <image width="100%" source="images/sec3-5-10.png">
                </image>

<p>After I use Solver, I find the local minimums occur at 0, 2.326, and 10, and the local maximums occur at 0.29115 and 7.3827.  The maximum value for the function in the interval is 5.409 and the minimum is 1.0149.  We verify that the endpoints, <m>x=0</m> and <m>x=10</m>, are both local minimums.</p>

                 <image width="100%" source="images/sec3-5-11.png">
                </image>


<p>This function can be used to illustrate a limitation of our method.  If we had graphed the functions at intervals at intervals of size 1 rather than 0.5, we get a different picture.</p>

                <image width="100%" source="images/sec3-5-12.png">
                </image>

<p>In that case, we miss the local maximum at 0.29 and confuse the left endpoint as a local maximum.  Since Solver does not use the picture, it will not be misled by it.  This example points out that while the graph is useful for guidance, we need to verify that we have not been misled by not graphing with enough resolution. </p></example>

<p><term>Warning</term>: In example 2 we saw that relying on the graph could deceive us.  The flip side is an example where relying on Solver can deceive us. We mentioned earlier that Solver uses a variant of Newtonâ€™s method to find values.  In rough terms, it repeatedly finds the linear approximation and slides up or down that line to the desired answer.  If we start close to the answer, this is a very effective method of finding a numerical solution.  However it is easy to construct problems where this leads to a blind alley or to the wrong answer.  In particular, the method has great difficulty with problems where the function is not differentiable or where it has several bends.  Consider the following example.
</p>

<example><title>Deceiving Solver</title>
<p><url href="https://youtu.be/Bc9CGnk9X8I">Link to video of this example</url></p>
<p> Use solver to gather information, on the interval <m>-2\le x\le 2</m>, on the graph of </p>
<me>f(x)=\begin{cases}
-5x-3&amp; x\lt 0\\
4(x-1)^2 &amp;x \gt 0\\
\end{cases}</me>

<p><term>Solution</term>:  As always, start by looking at a graph.  We use the IF function to produce cases.</p>

                <image width="70%" source="images/sec3-5-13.png">
                </image>

<p>It is pretty easy to see that the function reaches a maximum of 7 at <m>x=-2</m>, and has a root at <m>x=-0.6</m>.  On this interval the function does not have a minimum, but it gets close to -3 when <m>x</m> approaches 0 from the negative side.  If we start at <m>x=0.5</m> and try sliding up or down the curve, we are going in the wrong direction to find the root or minimum.  To find the maximum we also need to go down before we can go up to the maximum.</p>

<p>When we look at solver, we get the wrong but expected results.  The function not only fails to be differentiable at <m>x=0</m>, it has a jump there.  Solver finds the nearest local maximum and minimum.  For the root, it tells us it canâ€™t find a feasible solution.</p>
 
                <image width="70%" source="images/sec3-5-14.png">
                </image>
</example>

<p>The lesson to learn is that solver will help us find our candidate points, but we still need to understand the functions behavior well enough to give a good starting point.</p>


<p><term>A preview of things to come â€“ Extrema of functions of two variables:</term></p>

<p>There is another feature of Solver that we will come back to later in the course.  Goal Seek asked which cell should be changed to reach our desired goal.  Solver allows us to specify a number of cells that we can change.  This means it will work with functions of several variables.  This will allow us to shed some light on one of the <q>black boxes</q> we used earlier in this course, the ability of Excel to find a trendline, or best fitting curve to a set of data.</p>

<example><title>Use solver to find a best fitting line to a data set</title>
<p><url href="https://youtu.be/EAMhm1ALbv0">Link to video of this example</url></p>
<p>Find a best fitting line to the following data</p>

                 <tabular top="major" halign="center">
<row bottom="minor">
<cell>x</cell>
<cell>1</cell>
<cell>2</cell>
<cell>3</cell>
<cell>4</cell>
<cell>5</cell></row>                    
<row bottom="minor">
<cell>y</cell>
<cell>35</cell>
<cell>46</cell>
<cell>78</cell>
<cell>84</cell>
<cell>114</cell></row>   
                </tabular>

<p><term>Solution</term>:  As we mentioned in section 1.4, when we are asked to find a best fitting line, we are asked to create a predicting function <m>prediction(x)=A x+B</m>, with <m>A</m> and <m>B</m> chosen to minimize the sum of the squares of the error between the actual values and the predicted values.  We build a worksheet that finds the sum of squared errors.  We start with our variables, A and B, set at 5.</p>

                 <image width="70%" source="images/sec3-5-15.png">
                </image>
  
<p>We ask Solver to minimize D11 by changing B2 and B3.  For comparison we ask for the best fitting Trendline using the scatterplot.</p>

                <image width="80%" source="images/sec3-5-15.png">
                </image>

<p>We see that we get the same answers, subject to rounding rules.</p>
</example>
  
<p>The Trendline tool has the advantage of being easier to use in many cases.  Finding the best fitting curve with solver has the advantage of showing what we mean by best fitting.  It will also work with models that may not have been programmed into the Trendline tool.

</p> 
 

<exercises xml:id="exercises-set-sec-3-5">
	<title>Exercises: An Introduction to Solver</title>

<p>
In exercises 1-7 you are given a function and an interval it is defined over:</p>
<ol label="(a)">
<li><p>Make a chart of values and plot a graph of the function.</p></li>
<li><p>Find any roots for the function.</p></li>
<li><p>Find relative maxima and minima for the function.  (Remember to include the endpoints.).</p></li>
<li><p>Find the absolute maximum and minimum of the function on the interval.</p></li>
</ol>

<exercise ><statement><p><m>f(x)=x^2-10x+9</m>, on the interval <m>0\le x\le 10</m>.
</p></statement><solution>
<ol label="(a)">
<li>  
                <image width="70%" source="images/sec3-5-sol1a.png">
                </image>
</li>
<li><p>We can read off the roots from the table <m>f(x)=0</m> at <m>x = 1</m> and at <m>x = 9</m></p></li>
<li><p>Use Solver to find the minimum.</p>
                <image width="50%" source="images/sec3-5-sol1b.png">
                </image>
<p>Solver indicates that the minimum value of the function is -16 and the minimum takes place at <m>x = 5</m>.</p>
<p>We have local maximums at the endpoints <m>(0, 9)</m> and <m>(10,9)</m>.</p></li>
<li><p>Test the endpoints,<m>(0, 9)</m> and <m>(10,9)</m>,  and compare to the minimum, <m>(5, 16)</m>.</p>
<p>The absolute minimum is -16 (at <m>x = 5</m>) and the absolute maximum is 9 (at <m>x = 1</m> and 10)
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> 
	<m>g(x)=10x*(4/5)^x-1</m>, on the interval <m>0\le x\le 10</m>.
</p></statement></exercise>

<exercise ><statement><p> 
	<m>h(x)=(3000+200x) (0.97)^x</m>, on the interval <m>0\le x\le 100</m>.
</p></statement><solution>
<ol label="(a)">
<li> 
                <image width="70%" source="images/sec3-5-sol3a.png">
                </image>
</li>
<li><p>This function does not have any roots on the interval <m>0\le x \le 100</m>. </p></li>
<li><p>The graph indicates there is a maximum near <m>x = 20</m>. Use Solver:
 There is a maximum at <m>x = 17.83</m>. The maximum value is 3814.53
</p>
<p>We have local minimums at the endpoints <m>(0, 3000)</m> and <m>(100, 1093.71)</m>.</p></li>
<li>
<p>Compare the local extrema to the endpoints.  We need to consider three points, <m>(100, 1093.71)</m>, <m>(17.83, 3814.53)</m>, and <m>(100, 1093.71)</m>.</p>
<p>The global maximum is 3814.53 (at <m>x = 17.83</m>) </p>
<p>The global minimum of 1093.71 (at <m>x = 100</m>)</p>
</li>
</ol>
</solution></exercise>

<exercise ><statement><p> 
The revenue function, <m>revenue(q)=(500-3q)(q)</m>, on the interval <m>0\le q\le 200</m>.
</p></statement></exercise>

<exercise ><statement><p> 
	The profit function, <m>profit(q)=(500-3q)(q)-(12q+600)</m>, on the interval 
<m>0\le q\le 200</m>.
</p></statement><solution>
<ol label="(a)">
<li>  
                <image width="70%" source="images/sec3-5-sol5a.png">
                </image>
</li>
<li><p>There are 2 roots: one near <m>q = 0</m>, and the other near <m>q = 160</m>. Using Solver we find the roots are at <m>q = 1.24</m> and <m>q = 161.43</m>.
</p></li>
<li><p>The local maximum looks to be near <m>q = 80</m>. Using solver we get a local maximum of $19,245.33 at <m>q = 81.33</m>.</p>  
<p>We have local minimums at the endpoints <m>(0, -600)</m> and <m>(200, -23000.)</m>.</p>
</li>
<li>

<p>Compare the local extrema to the endpoints.  We need to consider three points, <m>(0, -600)</m>, <m>(81.33, 19245.33)</m>, and <m>(200, -23000)</m>.</p>
<p>The global maximum is 19245.33 (at <m>x = 81.33</m>) </p>
<p>The global minimum of -23000 (at <m>x = 200</m>)</p>
</li>
</ol>
</solution></exercise>

<exercise ><statement><p> 
	The profit function obtained as the best fitting quadratic curve for the following data</p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Quantity</cell>
<cell>157</cell>
<cell>513</cell>
<cell>702</cell>
<cell>842</cell>
<cell>995</cell></row>                    
<row bottom="minor">
<cell>Profit</cell>
<cell>143,814</cell>
<cell>314,801</cell>
<cell>322,223</cell>
<cell>279,988</cell>
<cell>189,263</cell></row>   
                </tabular>
  <p>on the interval <m>0\le quantity\le 1200</m>.
</p></statement></exercise>

<exercise ><statement><p> 
	The cost function obtained as the best fitting cubic curve for the following data, </p>
                <tabular top="major" halign="center">
<row bottom="minor">
<cell>Quantity</cell>
<cell>2</cell>
<cell>6</cell>
<cell>9</cell>
<cell>12</cell>
<cell>15</cell></row>                    
<row bottom="minor">
<cell>Cost</cell>
<cell>487</cell>
<cell>539</cell>
<cell>532</cell>
<cell>541</cell>
<cell>626</cell></row>   
                </tabular>
<p>on the interval <m>0\le quantity\le 16</m>.
</p></statement><solution>
<p>
First we need to use Trendlines to find the equation of the function. Use polynomial of degree 3 to find the function</p>
<me>Cost(x)= 0.3353x^3  - 7.9874x^2  + 59.63x + 396.91</me>

<ol label="(a)">
<li>   
                <image width="70%" source="images/sec3-5-sol7a.png">
                </image>
</li>
<li><p>There are no roots on the interval [0,16].
</p></li>
<li><p>There is a local maximum between 4 and 8, and a local minimum between 8 and 12. Using Solver We find the local maximum at (6.00, 539.57) and a local minimum at (9.88, 529.74).  We also have a local minimum at the endpoint <m>(0, 396.91)</m> and a local maximum at the other endpoint <m>(16, 679.604)</m>.</p>

</li>
<li>

<p>Compare the local extrema to the endpoints.  We need to consider four points, <m>(0, \$396.91)</m>, <m>(6.00, \$539.57)</m>, <m>(9.88, \$529.74)</m>, and <m>(16, \$584.30)</m>.</p>
<p>The global maximum is \$396.91 (at <m>x = 0</m>) </p>
<p>The global minimum of \$679.604 (at <m>x = 16</m>)</p>
</li>
</ol>
</solution></exercise>

<p> 
In exercises 8-10 you are given a function that and an interval it is defined over.</p>
<ol label="(a)"><li><p>Make a chart of values and plot a graph of the function.</p></li>
<li><p>Visually identify approximate local maxima and minima.  </p></li>
<li><p>Find a reasonable range of starting points from which Solver will find each local maximum or minimum.</p></li>
</ol>

<exercise ><statement><p> 
<m>f(x)=-0.25x^4+5.3x^3-36x^2+90x-15</m>, on the interval <m>0\le x\le 15</m>.
</p></statement></exercise>

<exercise ><statement><p> 
	<me>g(x)=\begin{cases}
4x-10&amp; x\lt 5\\
2(x-7)^2&amp;x \gt 5\\
\end{cases}</me>
on the interval <m>0\le x\le 10</m>.
</p></statement>
<solution>
<ol label="(a)"><li><p>Inserting an empty row will allow us to see the break in the graph where we switch from the linear part to the quadratic part of the function.
The functions have been included for clarity. 
</p>
                <image width="90%" source="images/sec3-5-sol9a.png">
                </image>

</li>
<li><p>The local maximum looks to be at approximately <m>x = 5</m> and the local minimum appears to be near <m>x = 7</m>.  </p></li>
<li><p>The local minimum is the most straight forward: start at <m>x = 7</m> and let Solver find the minimum. Solver indicates that the minimum value is 0 and the minimum occurs at <m>x = 7</m>.</p>

<p>For the local maximum we can have two things happen:</p>
<ul>
<li><p>The maximum is on the linear part of the equation.</p></li>
<li><p>The maximum is on the quadratic part.</p></li>
</ul>
<p>The two pieces do meet at <m>x = 5</m>, but we cannot see just where the line ends up.</p>
<p>So start with <m>x = 4</m> on Solver, find the maximum on the interval [4,5] and compare that to the value on the other branch of the graph.</p>
                <image width="90%" source="images/sec3-5-sol9b.png">
                </image>
 
<p>Solver returns a value of 10 at <m>x = 5</m>.</p>
<p>Note that <m>g(x)</m> is defined to be 8 exactly at <m>x = 5</m>, because the output is determined by the <m>2(x-7)^2</m>  part.</p>
<p>Thus we do not have a local maximum her.  The graph approaches 10 (gets infinitely close to it) as x approaches 5 from the left, but switches to 8 at he last minute.
</p></li>
</ol>
</solution></exercise>

<exercise ><statement><p> 
	<me>h(x)=\begin{cases}
-4*(x-2)^2&amp; x \lt 6\\
2(x-7)^2-10&amp;x \gt 6\\
\end{cases}</me>
on the interval <m>0\le x\le 10</m>.
</p></statement></exercise>

</exercises>
 

        </section>
 
        </chapter>
        
